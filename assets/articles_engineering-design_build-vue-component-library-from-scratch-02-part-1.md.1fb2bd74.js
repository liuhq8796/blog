import{_ as s,o as n,c as a,S as l}from"./chunks/framework.8730e13d.js";const p="/blog/assets/deps.5f5e027e.png",o="/blog/assets/dist-size.a7175e27.png",e="/blog/assets/build-order.1de0e43c.png",t="/blog/assets/demo.27b39da6.gif",g=JSON.parse('{"title":"ä»é›¶æ­å»ºVueç»„ä»¶åº“â€”â€”02.åœ¨ Monorepo æ¨¡å¼ä¸‹é›†æˆ Vite å’Œ TypeScript - Part 1","description":"","frontmatter":{},"headers":[],"relativePath":"articles/engineering-design/build-vue-component-library-from-scratch-02-part-1.md","filePath":"articles/engineering-design/build-vue-component-library-from-scratch-02-part-1.md","lastUpdated":1694075809000}'),c={name:"articles/engineering-design/build-vue-component-library-from-scratch-02-part-1.md"},r=l('<h1 id="ä»é›¶æ­å»ºvueç»„ä»¶åº“â€”â€”02-åœ¨-monorepo-æ¨¡å¼ä¸‹é›†æˆ-vite-å’Œ-typescript-part-1" tabindex="-1">ä»é›¶æ­å»ºVueç»„ä»¶åº“â€”â€”02.åœ¨ Monorepo æ¨¡å¼ä¸‹é›†æˆ Vite å’Œ TypeScript - Part 1 <a class="header-anchor" href="#ä»é›¶æ­å»ºvueç»„ä»¶åº“â€”â€”02-åœ¨-monorepo-æ¨¡å¼ä¸‹é›†æˆ-vite-å’Œ-typescript-part-1" aria-label="Permalink to &quot;ä»é›¶æ­å»ºVueç»„ä»¶åº“â€”â€”02.åœ¨ Monorepo æ¨¡å¼ä¸‹é›†æˆ Vite å’Œ TypeScript - Part 1&quot;">â€‹</a></h1><h2 id="å¯¼èˆª" tabindex="-1">å¯¼èˆª <a class="header-anchor" href="#å¯¼èˆª" aria-label="Permalink to &quot;å¯¼èˆª&quot;">â€‹</a></h2><p>ç³»åˆ—å¯¼èˆªï¼š<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-00.html">00.ç³»åˆ—å¤§çº²</a></p><p>ä¸Šä¸€ç¯‡ï¼š<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">01.æ­å»º Monorepo é¡¹ç›®ç»“æ„</a></p><h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h2><p>åœ¨ä¸Šä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†â€œæ–°å»ºæ–‡ä»¶å¤¹â€çš„æ“ä½œï¼Œä½¿ç”¨ pnpm ä¸ºæˆ‘ä»¬çš„ç»„ä»¶åº“æ­å»ºäº† monorepo ç›®å½•ç»“æ„ã€‚åœ¨æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬çš„ç»„ä»¶åº“å·¥ç¨‹ä¼šå¼€å§‹åˆæˆä½“ç³»â€”â€”åŠ å…¥æ„å»ºå·¥å…· Vite å’Œ TypeScript ç±»å‹æ”¯æŒï¼Œèƒ½å¤ŸçœŸæ­£é€šè¿‡æ„å»ºç”Ÿæˆäº§ç‰©ï¼Œå¹¶å……åˆ†å‘æŒ¥å‡º monorepo æ¨¡å¼ä¸‹å¼€å‘çš„çµæ´»æ€§ã€‚</p><h2 id="vite-ä»‹ç»" tabindex="-1">Vite ä»‹ç» <a class="header-anchor" href="#vite-ä»‹ç»" aria-label="Permalink to &quot;Vite ä»‹ç»&quot;">â€‹</a></h2><blockquote><p>Vite æ˜¯ä¸€ä¸ªç”±åŸç”Ÿ ESM é©±åŠ¨çš„ Web å¼€å‘æ„å»ºå·¥å…·ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡å‰ç«¯å¼€å‘ä½“éªŒã€‚</p></blockquote><p>Vite æ˜¯ä¸€ä¸ªæ–°å‹çš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š</p><ul><li>å¿«é€Ÿçš„å†·å¯åŠ¨ï¼šVite é€šè¿‡ ES Module çš„æ–¹å¼ï¼Œåˆ©ç”¨æµè§ˆå™¨å»è§£æ importï¼ŒæŒ‰éœ€ç¼–è¯‘ã€‚</li><li>å³æ—¶çš„çƒ­æ¨¡å—æ›´æ–°ï¼šVite é€šè¿‡ <a href="https://v3.cn.vuejs.org/guide/migration/hmr.html#%E6%A6%82%E8%BF%B0" target="_blank" rel="noreferrer">HMR</a> å®ç°äº†æ¨¡å—çº§åˆ«çš„çƒ­æ›´æ–°ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼šVite ä»…ä»…ä¼šç¼–è¯‘é‚£äº›è¢«è¯·æ±‚çš„æ¨¡å—ï¼Œè€Œä¸æ˜¯åƒ Webpack é‚£æ ·æŠŠæ‰€æœ‰çš„æ¨¡å—éƒ½ç¼–è¯‘ä¸€éã€‚</li></ul><p>åœ¨æˆ‘çœ‹æ¥ï¼ŒVite çš„å¿«æ›´å¤šåœ°ä½“ç°åœ¨äº†é…ç½®çš„å¿«ã€ä¸Šæ‰‹çš„å¿«ã€‚å¯¹äºç»å¤§å¤šæ•°å¤æ‚åº¦æœ‰é™çš„åœºæ™¯ï¼ŒVite éƒ½å¯è°“å®ç°äº†â€œæ„å»ºçš„æœ€ä½³å®è·µâ€ï¼Œå¤§éƒ¨åˆ†å·¥ç¨‹èƒ½åŠ›å‡ ä¹éƒ½æ˜¯å¼€ç®±å³ç”¨ï¼Œæå¤§åœ°å‡å°‘äº†æ„å»ºé…ç½®çš„æˆæœ¬ã€‚å³ä½¿ä½ æœ‰æ·±åº¦ä½¿ç”¨çš„éœ€æ±‚ï¼ŒVite ä¹Ÿå…·æœ‰ è‡ªå®šä¹‰æ’ä»¶ çš„èƒ½åŠ›ä»¥åŠè‰¯å¥½çš„ å‘¨è¾¹ç”Ÿæ€ã€‚</p><p>åœ¨å½“ä¸‹ï¼Œå¦‚æœä½ æƒ³è¦æ¥è§¦ä¸€æ¬¾å‰ç«¯æ„å»ºå·¥å…·ï¼Œæˆ‘å¼ºçƒˆæ¨èä» Vite å…¥æ‰‹ã€‚Vite å¯¹äºæ„å»ºå·¥å…·çš„åˆå­¦è€…è€Œè¨€ï¼Œèƒ½å¤Ÿå¤§å¹…å‡å°‘ä½¿ç”¨ä¼ ç»Ÿæ„å»ºå·¥å…·æ—¶ç¹ççš„æ¦‚å¿µç†è§£ã€æ’ä»¶é€‰å‹ã€æ’ä»¶æ–‡æ¡£é˜…è¯»çš„å›°éš¾ï¼Œå¿«é€Ÿå»ºç«‹èµ·æ­£åé¦ˆï¼Œè¿™æ ·æ‰æœ‰ä¸æ–­æ·±å…¥å­¦ä¹ ä¸‹å»çš„åŠ¨åŠ›ã€‚</p><h2 id="åŸºæœ¬ä¾èµ–å®‰è£…" tabindex="-1">åŸºæœ¬ä¾èµ–å®‰è£… <a class="header-anchor" href="#åŸºæœ¬ä¾èµ–å®‰è£…" aria-label="Permalink to &quot;åŸºæœ¬ä¾èµ–å®‰è£…&quot;">â€‹</a></h2><p>åœ¨æ›´å¤šæ“ä½œå¼€å§‹å‰ï¼Œæˆ‘ä»¬å…ˆå¼ºè°ƒä¸€ä¸‹ç³»åˆ—åˆ†äº«ç¼–å†™ä»£ç æ‰€ä½¿ç”¨çš„ IDE ä¸º VSCodeã€‚åœ¨æ“ä½œè¿‡ç¨‹ä¸­ä¼šæ¶‰åŠç›¸å½“å¤šçš„ IDE ä½¿ç”¨æŠ€å·§ï¼Œå¦‚æœä½¿ç”¨ WebStorm ç­‰å…¶ä»– IDE çš„è¯ï¼Œè¿™äº›çŸ¥è¯†å¯èƒ½æ˜¯æ— æ³•å³åˆ»åº”ç”¨çš„ï¼Œéœ€è¦è¯»è€…è‡ªè¡Œå˜é€šã€‚</p><h3 id="npmrc-æ–‡ä»¶-å¯é€‰" tabindex="-1">.npmrc æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ <a class="header-anchor" href="#npmrc-æ–‡ä»¶-å¯é€‰" aria-label="Permalink to &quot;.npmrc æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰&quot;">â€‹</a></h3><p>åœ¨å®‰è£…ä¾èµ–å‰ï¼Œå…ˆç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ .npmrc æ–‡ä»¶ï¼Œæˆ‘ä»¬è¯•ç€åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å»ºç«‹ .npmrc æ–‡ä»¶ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.npmrc</span></span></code></pre></div><p>è¿™ä¸ª .npmrc æ–‡ä»¶ç›¸å½“äºé¡¹ç›®çº§çš„ npm é…ç½®ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">registry</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">https://registry.npm.taobao.org</span></span></code></pre></div><p>ä¸Šé¢çš„é…ç½®ç›¸å½“äºåˆ‡æ¢ npm é•œåƒæºä¸º <a href="https://registry.npm.taobao.org" target="_blank" rel="noreferrer">https://registry.npm.taobao.org</a>ï¼Œåªä¸è¿‡é…ç½®åªåœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹ç”Ÿæ•ˆï¼Œä¼˜å…ˆçº§é«˜äºç”¨æˆ·è®¾ç½®çš„æœ¬åœ°é…ç½®ã€‚</p><p>è¿™ä¸ªæ•ˆæœæ˜¯ä¸æ˜¯å¾ˆåƒ npm set config registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noreferrer">https://registry.npm.taobao.org</a> ï¼Ÿæ˜¯çš„ï¼Œnpm set config çš„æœ¬è´¨æ˜¯ä¿®æ”¹ç”¨æˆ·çº§çš„ .npmrc æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨ C:\\Users${ç”¨æˆ·å}.npmrc(Windows ç³»ç»Ÿ) æˆ–è€… ~/.npmrc(Linux ç³»ç»Ÿ) ä½ç½®ã€‚</p><p>æˆ‘æ¨èå¤§å®¶å°†ä¸€äº›å¿…è¦çš„é…ç½®æ”¾åœ¨è¿™ä¸ªé¡¹ç›®çº§çš„ .npmrc æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ–‡ä»¶æäº¤åˆ°ä»£ç ä»“ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿åç»­è´¡çŒ®çš„å…¶ä»–ç”¨æˆ·å…å»è®¸å¤šç¯å¢ƒé…ç½®çš„éº»çƒ¦ï¼Œå°¤å…¶æ˜¯åœ¨å…¬å¸çš„å†…ç½‘ç¯å¢ƒä¸‹ï¼Œå„å¼å„æ ·çš„ npm ç§ä»“å’Œä»£ç†é…ç½®è®©å¾ˆå¤šæ–°äººå¤´ç–¼ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœä½ æ˜¯å¼€æºé¡¹ç›®ï¼Œå°±ä¸æ˜¯å¾ˆæ¨èä½ åœ¨é‡Œé¢åšç½‘ç»œç¯å¢ƒç›¸å…³çš„é…ç½®äº†ï¼Œå› ä¸ºæ¯ä¸ªè´¡çŒ®è€…çš„ç½‘ç»œç¯å¢ƒæ˜¯å¤šæ ·åŒ–çš„ï¼Œè¿™æ—¶é¡¹ç›®çº§çš„ .npmrc å°±åªé€‚åˆæ”¾ä¸€äº›ä¸åŒ…ç®¡ç†ç›¸å…³çš„é…ç½®ã€‚</p><h3 id="å®‰è£…å…¬å…±æ„å»ºä¾èµ–" tabindex="-1">å®‰è£…å…¬å…±æ„å»ºä¾èµ– <a class="header-anchor" href="#å®‰è£…å…¬å…±æ„å»ºä¾èµ–" aria-label="Permalink to &quot;å®‰è£…å…¬å…±æ„å»ºä¾èµ–&quot;">â€‹</a></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åœ¨æ ¹ç›®å½•ä¸‹å®‰è£…æ‰€éœ€çš„æ„å»ºå·¥å…·ï¼šVite å’Œ TypeScriptã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-wD</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">typescript</span></span></code></pre></div><p>å› ä¸ºæ¯ä¸ªåŒ…éƒ½éœ€è¦ç”¨åˆ° Vite å’Œ TypeScript è¿›è¡Œæ„å»ºï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸€ç«  <a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">ä»é›¶æ­å»ºVueç»„ä»¶åº“â€”â€”01.æ­å»º Monorepo é¡¹ç›®ç»“æ„</a> è®²è¿‡ï¼Œå…¬å…±å¼€å‘ä¾èµ–ç»Ÿä¸€å®‰è£…åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæ˜¯å¯ä»¥è¢«å„ä¸ªå­åŒ…æ­£å¸¸ä½¿ç”¨çš„ã€‚</p><p>ç”±äºæˆ‘ä»¬è¦æ„å»ºçš„æ˜¯ Vue ç»„ä»¶åº“ï¼ŒVue æ¨èçš„ç»„ä»¶å¼€å‘èŒƒå¼ å•æ–‡ä»¶ç»„ä»¶ SFC å¹¶ä¸æ˜¯åŸç”Ÿçš„ Web å¼€å‘è¯­æ³•ï¼Œè€Œæ˜¯ Vue æ–¹é¢å®šä¹‰çš„â€œæ–¹è¨€â€ï¼Œéœ€è¦ç»è¿‡ä¸€ä¸ªç¼–è¯‘ä¸ºåŸç”Ÿ js çš„è¿‡ç¨‹ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å¼•å…¥ç›¸å…³çš„ Vite æ’ä»¶ @vitejs/plugin-vueï¼Œè¿™ä¸ªæ’ä»¶é›†æˆäº† vue ç¼–è¯‘å™¨çš„èƒ½åŠ›ï¼Œä½¿å¾—æ„å»ºå·¥å…·èƒ½å¤Ÿç†è§£ Vue SFC æ¨¡æ¿ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-wD</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@vitejs/plugin-vue</span></span></code></pre></div><p>vue åº”è¯¥è¢«å®‰è£…åˆ°æ ¹ç›®å½•ä¸‹çš„ dependenciesï¼Œå› ä¸ºå‡ ä¹æ‰€æœ‰å­åŒ…çš„ peerDependencies ä¸­éƒ½å…·æœ‰ vue(peerDependencies ç›¸å…³å¯ä»¥å¤ä¹ <a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">ä»é›¶æ­å»ºVueç»„ä»¶åº“â€”â€”01.æ­å»º Monorepo é¡¹ç›®ç»“æ„</a>)ï¼Œæˆ‘ä»¬ç»“åˆ pnpm çš„ resolve-peers-from-workspace-root æœºåˆ¶ï¼Œå¯ä»¥ç»Ÿä¸€æ‰€æœ‰å­åŒ…ä¸­ vue çš„ç‰ˆæœ¬</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-wS</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vue</span></span></code></pre></div><p>å…³äº <a href="https://pnpm.io/zh/npmrc#resolve-peers-from-workspace-root" target="_blank" rel="noreferrer">resolve-peers-from-workspace-root</a> çš„è¯´æ˜ï¼š</p><blockquote><p>é»˜è®¤ä¸º trueã€‚ å¯ç”¨åï¼Œå°†ä¼šä½¿ç”¨æ ¹å·¥ä½œåŒºé¡¹ç›®çš„ dependencies è§£æå·¥ä½œåŒºä¸­ä»»ä½•é¡¹ç›®çš„ peer dependenciesã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„åŠŸèƒ½ï¼Œå› ä¸ºä½ å¯ä»¥åªåœ¨å·¥ä½œåŒºçš„æ ¹ç›®å½•ä¸­å®‰è£… peer dependenciesï¼Œå¹¶ä¸”ç¡®ä¿å·¥ä½œåŒºä¸­çš„æ‰€æœ‰é¡¹ç›®éƒ½ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„ peer dependenciesã€‚</p></blockquote><p>è¿™ä¸€æ­¥æ“ä½œæ­£ç¡®çš„æ ‡å¿—ï¼Œæ˜¯æ ¹ç›®å½• node_modules/.pnpm è·¯å¾„ä¸‹çš„ vue ç³»åˆ—åŒ…åªæœ‰ä¸€ä¸ªç‰ˆæœ¬ã€‚å¦‚æœåŒæ—¶å‡ºç° 3.0.0 å’Œ 3.x.x çš„ vueï¼Œè¯´æ˜æ“ä½œæœªåˆ°ä½ï¼Œ3.0.0 ç‰ˆæœ¬çš„ vue å°†å¯¼è‡´æ„å»ºè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ã€‚</p><p><img src="'+p+`" alt="ä¾èµ–æ–‡ä»¶"></p><p>å¦å¤–ï¼Œå¦‚æœå–œæ¬¢ä½¿ç”¨ CSS é¢„å¤„ç†å™¨çš„è¯ï¼Œä¹Ÿè¦åœ¨æ ¹ç›®å½•ä¸‹è¿›è¡Œå®‰è£…ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©å®‰è£… Sassï¼Œå¤§å®¶ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©å…¶ä»–çš„é¢„å¤„ç†å™¨ï¼Œä¾‹å¦‚ Lessã€Stylus ç­‰ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-wD</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sass</span></span></code></pre></div><h2 id="vite-é›†æˆ" tabindex="-1">Vite é›†æˆ <a class="header-anchor" href="#vite-é›†æˆ" aria-label="Permalink to &quot;Vite é›†æˆ&quot;">â€‹</a></h2><p>ä¸ºäº†æˆåŠŸé›†æˆ Viteï¼Œè®©æˆ‘ä»¬çš„ç»„ä»¶åº“èƒ½å¤Ÿæ„å»ºå‡ºäº§ç‰©ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦å®Œæˆä¸‰ä¸ªæ­¥éª¤ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>ç¼–å†™æ„å»ºç›®æ ‡æºç ã€‚å› ä¸ºæœ¬ç³»åˆ—æ–‡ç« çš„é‡ç‚¹æ˜¯å·¥ç¨‹åŒ–è€Œä¸ºç»„ä»¶åº“çš„å¼€å‘ï¼Œä»£ç é¢„å¤‡éƒ¨åˆ†æˆ‘ä»¬ä¸ä¼šå®ç°ç»„ä»¶çš„å®é™…åŠŸèƒ½ï¼Œåªç»™å‡ºèƒ½å¤Ÿæç°æ„å»ºè¦ç‚¹çš„ demo ä»£ç ã€‚</li><li>å‡†å¤‡ vite.config é…ç½®æ–‡ä»¶ã€‚</li><li>åœ¨ package.json ä¸­è®¾ç½®æ„å»ºè„šæœ¬ã€‚</li></ul><p>æˆ‘ä»¬å…ˆå›é¡¾ä¸Šä¸€ç« èŠ‚æ‰€è§„åˆ’çš„ monorepo ç›®å½•æœºæ„ï¼Œåœ¨é›†æˆ Vite çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå¯¹å®ƒåšéå¸¸å¤šçš„æ‰©å±•ï¼š</p><ol><li>å¯¹äº packages ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªç»„ä»¶åŒ…ï¼Œæˆ‘ä»¬åˆ¶å®šäº†æ›´ç»†çš„æºç ç»„ç»‡è§„åˆ™ï¼š <ul><li>å„ç§é…ç½®æ–‡ä»¶ï¼Œå¦‚ package.jsonã€vite.config.ts(js)ï¼Œéƒ½æ”¾åœ¨æ¨¡å—æ ¹ç›®å½•ä¸‹ã€‚</li><li>src ç›®å½•ä¸‹å­˜æ”¾æºç ï¼Œå…¶ä¸­ src/index.ts(js) ä½œä¸ºè¿™ä¸ªæ¨¡å—çš„æ€»å‡ºå£ï¼Œæ‰€æœ‰éœ€è¦æš´éœ²ç»™å¤–éƒ¨ä¾›å…¶ä»–æ¨¡å—ä½¿ç”¨çš„æ–¹æ³•ã€å¯¹è±¡éƒ½è¦åœ¨è¿™é‡Œå£°æ˜å¯¼å‡ºã€‚</li><li>dist ç›®å½•ä½œä¸ºäº§ç‰©è¾“å‡ºç›®å½•ï¼Œå½“ç„¶å¦‚æœæ²¡æ‰§è¡Œè¿‡æ„å»ºå‘½ä»¤ï¼Œè¿™ä¸ªç›®å½•æ˜¯ä¸ä¼šç”Ÿæˆçš„ã€‚</li></ul></li><li>åœ¨ packages ç›®å½•ä¸‹æ–°å»ºç»Ÿä¸€å‡ºå£åŒ…ï¼Œå‘½åä¸º wonderful-elementã€‚æ­£å¦‚ element-plus ä¸»åŒ…è´Ÿè´£é›†åˆå„ä¸ªå­åŒ…ï¼Œå¹¶ç»Ÿä¸€å¯¼å‡ºå…¶ä¸­å†…å®¹ä¸€èˆ¬ã€‚</li><li>æˆ‘ä»¬è¿˜æ²¡èµ°åˆ°æ­å»º demo æ–‡æ¡£çš„é˜¶æ®µï¼Œä½†åˆè¿«ä¸åŠå¾…åœ°æƒ³çœ‹åˆ°ç»„ä»¶çš„å®é™…æ•ˆæœï¼Œä¸ºäº†æ»¡è¶³è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬è¦åœ¨æ ¹ç›®å½•ä¸‹å»ºç«‹ demo æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯ä¸€ä¸ª Web åº”ç”¨ï¼Œç”¨æ¥å±•ç¤ºç»„ä»¶ï¼ŒåŒæ—¶éªŒè¯æˆ‘ä»¬çš„ monorepo æ¶æ„æ˜¯å¦èƒ½ç«‹å³å“åº”å­æ¨¡å—çš„æ›´æ–°ä¿®æ”¹ã€‚</li><li>å…³äº tsconfigï¼Œæˆ‘ä»¬ä¼šåœ¨é›†æˆ TypeScript çš„é˜¶æ®µè¿›è¡Œè¯´æ˜ã€‚</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ğŸ“¦wonderful-element</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚docs</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œpackage.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚demo</span><span style="color:#A6ACCD;">               </span><span style="color:#676E95;font-style:italic;"># å±•ç¤ºç»„ä»¶æ•ˆæœçš„ Web åº”ç”¨</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚node_modules</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚dist</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚public</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚src</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œindex.html</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œvite.config.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œtsconfig.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œpackage.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚packages</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚button</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚node_modules</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚dist</span><span style="color:#A6ACCD;">           </span><span style="color:#676E95;font-style:italic;"># ç»„ä»¶äº§ç‰©ç›®å½•</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚src</span><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># ç»„ä»¶æºç ç›®å½•</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œButton.vue</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œindex.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œpackage.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œvite.config.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚input</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œ...</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚shared</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œ...</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚wonderful-element</span><span style="color:#A6ACCD;">              </span><span style="color:#676E95;font-style:italic;"># ç»„ä»¶åº“ä¸»åŒ…ï¼Œå„ç»„ä»¶çš„ç»Ÿä¸€å‡ºå£</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œ...</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œpackage.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œtsconfig.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œtsconfig.base.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œtsconfig.node.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œtsconfig.src.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œpnpm-workspace.yaml</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œREADME.md</span></span></code></pre></div><p>å› ä¸ºæˆ‘ä»¬è§„å®šäº†æ¯ä¸ªæ¨¡å—çš„ dist éƒ½ä½œä¸ºäº§ç‰©è¾“å‡ºç›®å½•ï¼Œè€Œè¾“å‡ºäº§ç‰©æ˜¯ä¸éœ€è¦å…¥ä»“çš„(clone ä»£ç åæ‰§è¡Œæ„å»ºå‘½ä»¤å°±èƒ½ç”Ÿæˆ)ï¼Œæ‰€ä»¥è¦æ³¨æ„åœ¨æ ¹ç›®å½•çš„ .gitignore ä¸­æ·»åŠ äº§ç‰©ç›®å½• distï¼š</p><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .gitignore</span></span>
<span class="line"><span style="color:#A6ACCD;">node_modules</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#C3E88D;">dist</span></span></code></pre></div><h3 id="å…¬å…±æ–¹æ³•ä»£ç é¢„å¤‡" tabindex="-1">å…¬å…±æ–¹æ³•ä»£ç é¢„å¤‡ <a class="header-anchor" href="#å…¬å…±æ–¹æ³•ä»£ç é¢„å¤‡" aria-label="Permalink to &quot;å…¬å…±æ–¹æ³•ä»£ç é¢„å¤‡&quot;">â€‹</a></h3><p>åœ¨ä¸Šä¸€ç« çš„è§„åˆ’ä¸­(<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">ä»é›¶æ­å»ºVueç»„ä»¶åº“â€”â€”01.æ­å»º Monorepo é¡¹ç›®ç»“æ„</a>)ï¼Œæˆ‘ä»¬å®‰æ’ @wonderful-element/shared ä½œä¸ºå…¬å…·æ–¹æ³•åŒ…ï¼Œå°†æˆä¸ºæ‰€æœ‰å…¶ä»–æ¨¡å—çš„ä¾èµ–é¡¹ã€‚</p><p>æˆ‘ä»¬å‡å®šå·¥å…·æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªæ‰“å° Hello World çš„æ–¹æ³•ã€‚å¦å¤–ï¼Œä¸ºäº†æ¼”ç¤ºå¼•å…¥å¤–éƒ¨ä¾èµ–çš„å·¥ç¨‹èƒ½åŠ›ï¼Œæˆ‘ä»¬è¿˜è¦å¯¼å‡ºä¸€ä¸ªæ–¹æ³• useLodashï¼Œè¿™ä¸ªæ–¹æ³•åŸå°ä¸åŠ¨åœ°è¿”å› lodash å®ä¾‹å¯¹è±¡ã€‚index.ts ä¼šä½œä¸ºå‡ºå£ç»Ÿä¸€å¯¼å‡ºè¿™äº›æ–¹æ³•ã€‚ä¸‹é¢å±•ç¤ºæ“ä½œæ­¥éª¤ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">æ¨¡å—æºç ç›®å½•</span></span>
<span class="line"><span style="color:#FFCB6B;">ğŸ“¦shared</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">...</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚src</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œhello.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œindex.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œuseLodash.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">...</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ä¸º shared åŒ…å®‰è£… lodash ç›¸å…³ä¾èµ–</span></span>
<span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@wonderful-element/shared</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-S</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lodash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@types/lodash</span></span></code></pre></div><p>æ­£åœ¨å­¦ä¹  TypeScript çš„åŒå­¦ï¼Œå¦‚æœå¯¹è¯­æ³•å­˜åœ¨ç–‘æƒ‘ï¼Œå¯ä»¥åŠæ—¶å‰å¾€ <a href="https://www.typescriptlang.org/zh/" target="_blank" rel="noreferrer">TypeScript å®˜ç½‘</a> è¡¥å……çŸ¥è¯†ã€‚</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/shared/src/hello.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hello</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">to</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">txt</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">Hello </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">to</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">!</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">txt</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">txt</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/shared/src/useLodash.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> lodash </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useLodash</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lodash</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/shared/src/index.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./hello</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./useLodash</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><h3 id="ç»„ä»¶ä»£ç é¢„å¤‡" tabindex="-1">ç»„ä»¶ä»£ç é¢„å¤‡ <a class="header-anchor" href="#ç»„ä»¶ä»£ç é¢„å¤‡" aria-label="Permalink to &quot;ç»„ä»¶ä»£ç é¢„å¤‡&quot;">â€‹</a></h3><h4 id="button-ç»„ä»¶" tabindex="-1">button ç»„ä»¶ <a class="header-anchor" href="#button-ç»„ä»¶" aria-label="Permalink to &quot;button ç»„ä»¶&quot;">â€‹</a></h4><p>æˆ‘ä»¬å…ˆè®¾ç½® button ç»„ä»¶çš„åˆå§‹ä»£ç ï¼Œä¸ºäº†æ¼”ç¤º monorepo å·¥ç¨‹ä¸­å†…éƒ¨æ¨¡å—ä¹‹é—´äº’ç›¸ä¾èµ–çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å‡å®šæŒ‰é’®ç»„ä»¶çš„ç”¨ä¾‹ä¸ºç‚¹å‡»ä¹‹åæ‰“å° Hello \${props.hello}ï¼Œé‚£ä¹ˆ button å°†ä¾èµ–äºå…ˆå‰å®šä¹‰çš„ shared æ¨¡å—ä¸­çš„ hello æ–¹æ³•ã€‚æˆ‘ä»¬å…ˆé€šè¿‡ pnpm workspace å‘½ä»¤å£°æ˜å†…éƒ¨æ¨¡å—å…³è”ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wonderful-element/button</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-S</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wonderful-element/shared</span></span></code></pre></div><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆåœ¨å­æ¨¡å—ä¸‹çš„ package.json ä¸­æŒ‰ç…§ workspace åè®® æ‰‹åŠ¨å£°æ˜å†…éƒ¨ä¾èµ–ï¼Œç„¶åé€šè¿‡ pnpm -w i æ‰§è¡Œå…¨å±€å®‰è£…ï¼Œä¹Ÿèƒ½è¾¾åˆ°å’Œä¸Šé¢é‚£æ¡å‘½ä»¤ä¸€æ ·çš„æ•ˆæœï¼Œä¸¤ç§æ–¹å¼äºŒé€‰ä¸€å³å¯ã€‚</p><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// packages/button/package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  // ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;dependencies&quot;: {</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#C3E88D;">   &quot;wonderful-element/shared&quot;: &quot;workspace:^&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œå®ç° button ç»„ä»¶ä»£ç ï¼Œå¹¶åœ¨ index.ts ä¸­å¯¼å‡ºã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ğŸ“¦button</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">...</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚src</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œbutton.vue</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œindex.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">...</span></span></code></pre></div><p>æ­£åœ¨å­¦ä¹  Vue æ¡†æ¶çš„åŒå­¦ï¼Œå¦‚æœå¯¹ demo ä»£ç å­˜åœ¨ç–‘æƒ‘ï¼Œå¯ä»¥åŠæ—¶å‰å¾€ <a href="https://cn.vuejs.org/" target="_blank" rel="noreferrer">Vue å®˜ç½‘</a> è¡¥å……çŸ¥è¯†ã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œ import from &#39;wonderful-element/shared&#39; è¯­å¥åœ¨ IDE ä¸­å¯èƒ½ä¼šå‡ºç° ts æŠ¥é”™ï¼Œè¿™ä¸ªä¸å½±å“æ„å»ºï¼Œæˆ‘ä»¬æš‚æ—¶å¿½ç•¥å®ƒï¼Œåœ¨åç»­ TypeScript å®æ“éƒ¨åˆ†ä¼šè§£å†³ã€‚</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// packages/button/src/button.vue</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hello</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wonderful-element/shared</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> props </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">withDefaults</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">defineProps</span><span style="color:#89DDFF;">&lt;{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clickHandler</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">hello</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">text</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">w-button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">clickHandler</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">slot</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">slot</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/button/src/index.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Button </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./button.vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Button</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="input-ç»„ä»¶" tabindex="-1">input ç»„ä»¶ <a class="header-anchor" href="#input-ç»„ä»¶" aria-label="Permalink to &quot;input ç»„ä»¶&quot;">â€‹</a></h4><p>æŒ‰ç…§ç±»ä¼¼çš„æ–¹å¼ï¼Œä¹Ÿç®€å•å®ç°å¤„ç†ä¸€ä¸‹ input æ¨¡å—ã€‚æˆ‘ä»¬å‡å®š input è¾“å…¥æ¡†ç»„ä»¶å®ç°çš„ç”¨ä¾‹æ˜¯ç›‘å¬å†…å®¹å˜åŒ–ï¼Œè°ƒç”¨ hello æ–¹æ³•æ‰“å°å½“å‰è¾“å…¥çš„å†…å®¹ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wonderful-element/input</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-S</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wonderful-element/shared</span></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// packages/input/src/input.vue</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hello</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wonderful-element/shared</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">withDefaults</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">defineProps</span><span style="color:#89DDFF;">&lt;{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">modelValue</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">modelValue</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> emit </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineEmits</span><span style="color:#89DDFF;">&lt;{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">event</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">update:modelValue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">val</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">inputHandler</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">emit</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">update:modelValue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">hello</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">w-input</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">modelValue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@input</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">inputHandler</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/input/src/index.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Input </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./input.vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Input</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="ç»Ÿä¸€å‡ºå£åŒ…" tabindex="-1">ç»Ÿä¸€å‡ºå£åŒ… <a class="header-anchor" href="#ç»Ÿä¸€å‡ºå£åŒ…" aria-label="Permalink to &quot;ç»Ÿä¸€å‡ºå£åŒ…&quot;">â€‹</a></h3><p>wonderful-element æ¨¡å—ä½œä¸ºå„ä¸ªç»„ä»¶çš„ç»Ÿä¸€å‡ºå£ï¼Œéœ€è¦åœ¨ package.json ä¸­æ­£ç¡®å£°æ˜ä¸æ‰€æœ‰ç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼Œä¹‹åæ¯å¢åŠ ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œéƒ½åº”è¯¥åœ¨ wonderful-element æ¨¡å—ä¸­è¡¥å……å¯¼å‡ºä»£ç ã€‚</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/wonderful-element/package.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// å…¶ä»–å­—æ®µå®Œå…¨å‚è€ƒ button å³å¯</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">dependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">wonderful-element/button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">workspace:^</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">wonderful-element/input</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">workspace:^</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">wonderful-element/shared</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">workspace:^</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>å®Œæˆå£°æ˜åï¼Œæ‰§è¡Œ pnpm -w i æ›´æ–°ä¾èµ–ã€‚</p><p>ä¹‹ååœ¨ src/index.ts æ–‡ä»¶ä¸­å°†å„ä¸ªæ¨¡å—çš„å†…å®¹å¯¼å‡ºå³å¯ã€‚</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/wonderful-element/src/index.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wonderful-element/button</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wonderful-element/input</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wonderful-element/shared</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><h3 id="æ„å»ºå…¬å…±æ–¹æ³•æ¨¡å—-çº¯-js-ts-ä»£ç " tabindex="-1">æ„å»ºå…¬å…±æ–¹æ³•æ¨¡å—(çº¯ JS/TS ä»£ç ) <a class="header-anchor" href="#æ„å»ºå…¬å…±æ–¹æ³•æ¨¡å—-çº¯-js-ts-ä»£ç " aria-label="Permalink to &quot;æ„å»ºå…¬å…±æ–¹æ³•æ¨¡å—(çº¯ JS/TS ä»£ç )&quot;">â€‹</a></h3><p>æŒ‰ç…§ <a href="https://cn.vitejs.dev/config/#config-intellisense" target="_blank" rel="noreferrer">Vite å®˜æ–¹ä»‹ç»çš„é…ç½®æ–¹æ³•</a>ï¼Œæˆ‘ä»¬åœ¨å…¬å…±æ–¹æ³•æ¨¡å— shared åŒ…ä¸­æ·»åŠ  vite.config.tsï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶å°†å‘Šè¯‰ vite å¦‚ä½•æ„å»ºè¿™ä¸ªæ¨¡å—ã€‚</p><p>ç»„ä»¶åº“é¡¹ç›®çš„æ¨¡å—è‡ªç„¶è¦ä»¥åº“æ¨¡å¼æ„å»ºï¼ŒVite èƒ½å¤Ÿå¾ˆå¥½åœ°æ”¯æŒè¿™ç§æ„å»ºæ–¹å¼ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿå¯¹è¿™ç§ç”¨æ³•è¿›è¡Œäº† <a href="https://cn.vitejs.dev/guide/build.html#library-mode" target="_blank" rel="noreferrer">è¯´æ˜</a>ã€‚</p><p>æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåº“æ¨¡å¼ä¸‹æœ€ç®€å•çš„ vite.config æ–‡ä»¶ï¼Œå¹¶å°† package.json ä¸­çš„ build è„šæœ¬ä¿®æ”¹æˆ Vite æ„å»ºæŒ‡ä»¤ã€‚</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/shared/vite.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// äº§ç‰©è¾“å‡ºç›®å½•ï¼Œé»˜è®¤å€¼å°±æ˜¯ distã€‚æˆ‘ä»¬ä½¿ç”¨é»˜è®¤å€¼ï¼Œæ³¨é‡Šæ‰æ­¤å­—æ®µã€‚</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// outDir: &#39;dist&#39;,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å‚è€ƒï¼šhttps://cn.vitejs.dev/config/build-options.html#build-lib</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">lib</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// æ„å»ºçš„å…¥å£æ–‡ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./src/index.ts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// äº§ç‰©çš„ç”Ÿæˆæ ¼å¼ï¼Œé»˜è®¤ä¸º [&#39;es&#39;, &#39;umd&#39;]ã€‚æˆ‘ä»¬ä½¿ç”¨é»˜è®¤å€¼ï¼Œæ³¨é‡Šæ‰æ­¤å­—æ®µã€‚</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// formats: [&#39;es&#39;, &#39;umd&#39;],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// å½“äº§ç‰©ä¸º umdã€iife æ ¼å¼æ—¶ï¼Œè¯¥æ¨¡å—æš´éœ²çš„å…¨å±€å˜é‡åç§°</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">WonderfulElementShared</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// äº§ç‰©æ–‡ä»¶åç§°</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">fileName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wonderful-element-shared</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ä¸ºäº†æ–¹ä¾¿å­¦ä¹ ï¼ŒæŸ¥çœ‹æ„å»ºäº§ç‰©ï¼Œå°†æ­¤ç½®ä¸º falseï¼Œä¸è¦æ··æ·†äº§ç‰©ä»£ç </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">minify</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// packages/shared/package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  // ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;scripts&quot;: {</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#F07178;">   &quot;build&quot;: &quot;echo build&quot;,</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#C3E88D;">   &quot;build&quot;: &quot;vite build&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;test&quot;: &quot;echo test&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  },</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p>ä¹‹åï¼Œæ‰§è¡Œ shared åŒ…çš„æ„å»ºæŒ‡ä»¤ï¼ŒVite ä¼šè‡ªåŠ¨è¯»å–å¯¹åº”çš„ vite.config æ–‡ä»¶ï¼Œç”Ÿæˆæ„å»ºäº§ç‰©ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@wonderful-element/shared</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä»¥ä¸‹ä¸ºæŒ‡ä»¤è¾“å‡º</span></span>
<span class="line"><span style="color:#FFCB6B;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v4.4.4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">building</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production...</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modules</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transformed.</span></span>
<span class="line"><span style="color:#FFCB6B;">dist/wonderful-element-shared.mjs</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">213.46</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">41.73</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">dist/wonderful-element-shared.umd.js</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">224.92</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42.24</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">built</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">751</span><span style="color:#C3E88D;">ms</span></span></code></pre></div><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒVite ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆ .mjs å’Œ .umd.js åç¼€çš„äº§ç‰©ï¼Œå¯ä»¥æ»¡è¶³ç»å¤§å¤šæ•°æƒ…å†µä¸‹å¯¹äºäº§ç‰©æ ¼å¼çš„è¦æ±‚ã€‚å…¶ä¸­ .mjs å¯¹åº” esm æ ¼å¼çš„å¯ç”¨äº§ç‰©ï¼Œ.umd.js å¯¹åº” cjs æ ¼å¼çš„å¯ç”¨äº§ç‰©ã€‚æˆ‘ä»¬æŒ‰ç…§äº§ç‰©çš„è·¯å¾„ï¼Œåœ¨ package.json ä¸­ä¿®æ”¹å¯¹åº”çš„å…¥å£å­—æ®µ(å›é¡¾ï¼š<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">ä»é›¶æ­å»ºVueç»„ä»¶åº“â€”â€”01.æ­å»º Monorepo é¡¹ç›®ç»“æ„</a>)ï¼š</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/shared/package.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// çœç•¥å…¶ä»–æ— å…³é…ç½® ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./dist/wonderful-element-shared.umd.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./dist/wonderful-element-shared.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">exports</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">require</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./dist/wonderful-element-shared.umd.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./dist/wonderful-element-shared.mjs</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬ä»…ä»…å¯¼å‡ºäº†ä¸¤ä¸ªå¾ˆçŸ­å°çš„æ–¹æ³•ï¼Œç”Ÿæˆçš„äº§ç‰©å´æœ‰ 200K ä¹‹å¤§ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™æ—¶å› ä¸ºæˆ‘ä»¬å®‰è£…çš„ npm åŒ… lodash çš„ä»£ç ä¹Ÿè¢«æ‰“åŒ…è¿›æ¥äº†ã€‚</p><p>æ„å»ºå·¥å…·æ‰“åŒ…æ—¶é»˜è®¤è¡Œä¸ºï¼Œæ˜¯å°†æ‰€æœ‰æ¶‰åŠæ¨¡å—çš„ä»£ç éƒ½ä¸€å¹¶é›†åˆåˆ°äº§ç‰©ä¸­ã€‚è¿™åœ¨æ‰“åŒ… Web åº”ç”¨çš„æ—¶å€™æ˜¯æ²¡é—®é¢˜çš„ï¼Œå› ä¸ºæµè§ˆå™¨å¹¶ä¸èƒ½è¯†åˆ« npm æ¨¡å—ï¼Œæ‰€ä»¥äº§ç‰©å°±éœ€è¦åŒ…å«æ‰€æœ‰ä»£ç ã€‚å¯æˆ‘ä»¬æ­£åœ¨æ‰“åŒ…çš„ä¸œè¥¿å°†ä½œä¸º npm åŒ…ç»™å…¶ä»–åº”ç”¨å®‰è£…ï¼Œåœ¨å·¥ç¨‹ç¯å¢ƒä¸‹ï¼Œæ„å»ºå·¥å…·æ˜¯å¯ä»¥è¯†åˆ«æ¨¡å—å¼•å…¥è¯­æ³•çš„ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä¸º åº“ / npm åŒ… æ„å»ºäº§ç‰©æ—¶ï¼Œåœ¨å®è·µä¸­é€šå¸¸ä¼šå°†ä¾èµ–é¡¹(package.json ä¸­ dependenciesã€peerDependencies å­—æ®µä¸‹çš„ä¾èµ–)å£°æ˜ä¸º external(å¤–éƒ¨ä¾èµ–)ï¼Œä½¿è¿™ä¸ªä¾èµ–ç›¸å…³çš„æºç ä¸è¢«æ•´åˆè¿›äº§ç‰©ï¼Œè€Œæ˜¯ä¿ç•™ç€ import xxx from &#39;pkg&#39; çš„å¯¼å…¥è¯­å¥ã€‚</p><p>æˆ‘ä»¬ä¿®æ”¹ vite.config æ–‡ä»¶ï¼Œå¢åŠ  rollupOptions é€‰é¡¹ï¼Œå°†ä¾èµ–é¡¹ lodash å£°æ˜ä¸ºå¤–éƒ¨æ¨¡å—ï¼š</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/shared/vite.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å…¶ä»–é…ç½®...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å‚è€ƒï¼šhttps://cn.vitejs.dev/config/build-options.html#build-rollupoptions</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rollupOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// ç¡®ä¿å¤–éƒ¨åŒ–å¤„ç†é‚£äº›ä½ ä¸æƒ³æ‰“åŒ…è¿›åº“çš„ä¾èµ–</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">external</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">lodash.</span><span style="color:#89DDFF;">*/</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// åœ¨ UMD æ„å»ºæ¨¡å¼ä¸‹ä¸ºè¿™äº›å¤–éƒ¨åŒ–çš„ä¾èµ–æä¾›ä¸€ä¸ªå…¨å±€å˜é‡ã€‚å³ä½¿ä¸è®¾ç½®ï¼Œæ„å»ºå·¥å…·ä¹Ÿä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆã€‚ä¸ªäººå€¾å‘äºä¸è®¾ç½®</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        globals: {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">          lodash: &#39;lodash&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        }</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        */</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>å†æ¬¡æ‰§è¡Œæ„å»ºæŒ‡ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº§ç‰©ä½“ç§¯å¤§å¹…ç¼©å°ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@wonderful-element/shared</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä»¥ä¸‹ä¸ºæŒ‡ä»¤è¾“å‡º</span></span>
<span class="line"><span style="color:#FFCB6B;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v4.4.4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">building</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production...</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modules</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transformed.</span></span>
<span class="line"><span style="color:#FFCB6B;">dist/wonderful-element-shared.mjs</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0.20</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.15</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">dist/wonderful-element-shared.umd.js</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0.69</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.36</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">built</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">93</span><span style="color:#C3E88D;">ms</span></span></code></pre></div><p>æ£€æŸ¥ dist ç›®å½•ä¸‹çš„äº§ç‰©å¯ä»¥å‘ç°ï¼Œå¤–éƒ¨ä¾èµ– lodash ä¸å†è¢«æ‰“åŒ…è¿›æºç ï¼Œè€Œæ˜¯ä¿æŒåŸæœ¬çš„å¼•å…¥è¯­å¥ã€‚å¤–éƒ¨åŒ–å¤„ç†ä¾èµ–å¯¹äºåº“çš„å¼€å‘è€…è€Œè¨€æ˜¯ä¸€ä»¶éå¸¸ä¸¥è‚ƒçš„äº‹æƒ…ï¼Œäº§ç‰©çš„å¤§å°ä¼šç›´æ¥å½±å“ä¸‹æ¸¸ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚</p><p><img src="`+o+`" alt="æ„å»ºå¤§å°"></p><h3 id="æ„å»ºç»„ä»¶æ¨¡å—-åŒ…å«-vue-sfc-æ¨¡æ¿" tabindex="-1">æ„å»ºç»„ä»¶æ¨¡å—(åŒ…å« Vue SFC æ¨¡æ¿) <a class="header-anchor" href="#æ„å»ºç»„ä»¶æ¨¡å—-åŒ…å«-vue-sfc-æ¨¡æ¿" aria-label="Permalink to &quot;æ„å»ºç»„ä»¶æ¨¡å—(åŒ…å« Vue SFC æ¨¡æ¿)&quot;">â€‹</a></h3><p>ä¸åŒäºå…¬å…±æ–¹æ³•æ¨¡å—çš„çº¯ ts/js ä»£ç ï¼ŒVue ç»„ä»¶é€šå¸¸è¦æ¶‰åŠåˆ°å¯¹å¼€å‘èŒƒå¼ <a href="https://cn.vuejs.org/guide/scaling-up/sfc.html" target="_blank" rel="noreferrer">å•æ–‡ä»¶ç»„ä»¶ SFC</a> çš„è¯†åˆ«ã€‚å¹¸è¿çš„æ˜¯ï¼ŒVite æä¾›äº†å®˜æ–¹æ’ä»¶ <a href="https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue" target="_blank" rel="noreferrer">@vitejs/plugin-vue</a> æ¥å¤„ç†è¿™ä¸ªå¤æ‚çš„ç¼–è¯‘ä»»åŠ¡ã€‚</p><p>æˆ‘ä»¬ä»¥ button æ¨¡å—ä¸ºä¾‹å­æ¥æ¼”ç¤º Vue ç»„ä»¶çš„æ„å»ºé…ç½®ï¼š</p><ul><li>åœ¨å…ˆå‰ shared æ¨¡å—çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥åŠ å…¥æ’ä»¶ @vitejs/plugin-vue æ¥å¤„ç† .vue æ–‡ä»¶ã€‚</li><li>ä¾èµ–å¤–éƒ¨åŒ–å¤„ç†ä¹Ÿè¦æ³¨æ„ï¼Œbutton æ¨¡å—ä¾èµ–çš„ shared æ¨¡å—å› ä¸ºåœ¨ dependencies å­—æ®µä¸­å·²å£°æ˜ï¼Œå› æ­¤å°†å…¶æ’é™¤ã€‚åŒæ—¶ peerDependencies vue ä¹Ÿåº”å½“è¢«æ’é™¤ã€‚</li><li>å°† package.json ä¸­çš„ build å‘½ä»¤æ›´æ¢ä¸º vite buildã€‚</li></ul><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/button/vite.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> vue </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@vitejs/plugin-vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å¢åŠ æ’ä»¶çš„ä½¿ç”¨</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#82AAFF;">vue</span><span style="color:#A6ACCD;">()]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">lib</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./src/index.ts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">WonderfulElementButton</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">fileName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wonderful-element-button</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">minify</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rollupOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">external</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// é™¤äº† @wonderful-element/sharedï¼Œæœªæ¥å¯èƒ½è¿˜ä¼šä¾èµ–å…¶ä»–å†…éƒ¨æ¨¡å—ï¼Œä¸å¦‚ç”¨æ­£åˆ™è¡¨è¾¾å¼å°† @wonderful-element å¼€å¤´çš„ä¾èµ–é¡¹ä¸€èµ·å¤„ç†æ‰</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">@wonderful-element.</span><span style="color:#89DDFF;">*/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>å®Œæˆä¸Šè¿°æ“ä½œåï¼Œæ‰§è¡Œ button åŒ…çš„æ„å»ºå‘½ä»¤ï¼Œè¾“å‡ºäº§ç‰©ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@wonderful-element/button</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä»¥ä¸‹ä¸ºæŒ‡ä»¤è¾“å‡º</span></span>
<span class="line"><span style="color:#FFCB6B;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v4.4.4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">building</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production...</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modules</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transformed.</span></span>
<span class="line"><span style="color:#FFCB6B;">dist/style.css</span><span style="color:#A6ACCD;">           </span><span style="color:#F78C6C;">0.06</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.08</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">dist/wonderful-element-button.mjs</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0.94</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.50</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@wonderful-element/shared</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">shared</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">dist/wonderful-element-button.umd.js</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">1.44</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.71</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">built</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">622</span><span style="color:#C3E88D;">ms</span></span></code></pre></div><p>æ„å»ºæˆåŠŸåï¼Œæ ¹æ®äº§ç‰©è·¯å¾„ä¿®æ”¹ package.json çš„å…¥å£å­—æ®µã€‚</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// packages/button/package.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// çœç•¥å…¶ä»–æ— å…³é…ç½® ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./dist/wonderful-element-button.umd.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./dist/wonderful-element-button.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">exports</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">require</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./dist/wonderful-element-button.umd.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./dist/wonderful-element-button.mjs</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="æ•´ä½“æ„å»º" tabindex="-1">æ•´ä½“æ„å»º <a class="header-anchor" href="#æ•´ä½“æ„å»º" aria-label="Permalink to &quot;æ•´ä½“æ„å»º&quot;">â€‹</a></h3><p>æœ€åè¿˜å‰©ä¸‹ç»Ÿä¸€å‡ºå£ ui æ¨¡å—ï¼Œç”±äºåªæœ‰å¯¼å‡ºè¯­å¥ï¼Œæš‚ä¸éœ€è¦ @vitejs/plugin-vue æ’ä»¶ï¼Œå®ƒçš„å¤„ç†æ–¹å¼ä¸ shared æ¨¡å—ç±»ä¼¼ã€‚</p><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæ‰€æœ‰ç»„ä»¶çš„æ„å»ºéƒ½å®Œæˆäº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="https://pnpm.io/zh/filtering#--filter-glob---filter-glob" target="_blank" rel="noreferrer">è·¯å¾„è¿‡æ»¤å™¨</a> é€‰ä¸­ packages ç›®å½•ä¸‹æ‰€æœ‰åŒ…è¿›è¡Œæ„å»ºã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./packages/**</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span></code></pre></div><p>ç”±äº wonderful-element æ˜¯ç»„ä»¶åº“çš„ç»Ÿä¸€å‡ºå£åŒ…ï¼Œå®ƒçš„ package.json çš„ dependencies å­—æ®µä¸­å£°æ˜äº†æ‰€æœ‰å…¶ä»–æ¨¡å—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¾èµ–è¿‡æ»¤å™¨ ...ï¼Œæ„å»º ui ä»¥åŠå…¶æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼Œè¾¾åˆ°æ•´ä½“æ„å»ºçš„æ•ˆæœã€‚ä¸è¿‡å¦‚æœä¸èƒ½ç¡®ä¿æ‰€æœ‰åŒ…éƒ½åœ¨ ui ä¸­å†è¿›è¡Œä¸€æ¬¡å¯¼å‡ºï¼Œè¿˜æ˜¯é‡‡ç”¨å‰è€…æ›´ä½³ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wonderful-element...</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span></code></pre></div><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Scope:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">workspace</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">projects</span></span>
<span class="line"><span style="color:#FFCB6B;">packages/shared</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;">$ </span><span style="color:#C3E88D;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v4.4.9</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">building</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transforming...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modules</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transformed.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rendering</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chunks...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">computing</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">size...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/wonderful-element-shared.mjs</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0.20</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.15</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/wonderful-element-shared.umd.js</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0.70</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.37</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">built</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">84</span><span style="color:#C3E88D;">ms</span></span>
<span class="line"><span style="color:#FFCB6B;">â””â”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Done</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">547</span><span style="color:#C3E88D;">ms</span></span>
<span class="line"><span style="color:#FFCB6B;">packages/button</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;">$ </span><span style="color:#C3E88D;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v4.4.9</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">building</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transforming...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modules</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transformed.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rendering</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chunks...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">computing</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">size...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/wonderful-element-button.mjs</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0.62</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.35</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@wonderful-element/shared</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">shared</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/wonderful-element-button.umd.js</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">1.11</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.56</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">built</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">626</span><span style="color:#C3E88D;">ms</span></span>
<span class="line"><span style="color:#FFCB6B;">â””â”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Running...</span></span>
<span class="line"><span style="color:#FFCB6B;">packages/input</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;">$ </span><span style="color:#C3E88D;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v4.4.9</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">building</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transforming...</span></span>
<span class="line"><span style="color:#FFCB6B;">â””â”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Done</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transformed.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rendering</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chunks...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">computing</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">size...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/wonderful-element-input.mjs</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0.74</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.40</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@wonderful-element/shared</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">shared</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/wonderful-element-input.umd.js</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">1.25</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.61</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">built</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">653</span><span style="color:#C3E88D;">ms</span></span>
<span class="line"><span style="color:#FFCB6B;">â””â”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Done</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">s</span></span>
<span class="line"><span style="color:#FFCB6B;">packages/wonderful-element</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;">$ </span><span style="color:#C3E88D;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v4.4.9</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">building</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transforming...</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> lines collapsed</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rendering</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chunks...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">computing</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">size...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/wonderful-element.mjs</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0.13</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.08</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@wonderful-element/button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@wonderful-element/input</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">input</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">was</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">provided</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">external</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@wonderful-element/shared</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output.globals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â€“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guessing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">shared</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/wonderful-element.umd.js</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">1.39</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.45</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kB</span></span>
<span class="line"><span style="color:#FFCB6B;">â””â”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Running...</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">âœ“</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">built</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">55</span><span style="color:#C3E88D;">ms</span></span>
<span class="line"><span style="color:#FFCB6B;">â””â”€</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Done</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">401</span><span style="color:#C3E88D;">ms</span></span></code></pre></div><p>è§‚å¯Ÿå‘½ä»¤è¡Œè¾“å‡ºï¼Œå¯ä»¥å‘ç°æ•´ä¸ªæ‰“åŒ…æ‰§è¡Œé¡ºåº(shared -&gt; button &amp; input(å¹¶è¡Œ) -&gt; ui) æ˜¯ç¬¦åˆä¾èµ–æ ‘çš„æ‹“æ‰‘æ’åºçš„(å›é¡¾ï¼š<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">ä»é›¶æ­å»ºVueç»„ä»¶åº“â€”â€”01.æ­å»º Monorepo é¡¹ç›®ç»“æ„</a>)ã€‚ç”±äºæˆ‘ä»¬ç”¨ rollupOptions.external å¤–éƒ¨åŒ–äº†ä¾èµ–ï¼Œè¿™ä¸ªç‰¹æ€§ç°åœ¨å¯¹æˆ‘ä»¬è€Œè¨€æ— å…³ç´§è¦ï¼Œä½†åœ¨æœªæ¥å®šåˆ¶å®Œå–„çš„æ‰“åŒ…ä½“ç³»ï¼Œéœ€è¦ç ”ç©¶å…¨é‡æ„å»ºæ—¶ï¼Œæ‹“æ‰‘æ’åºçš„ç‰¹æ€§å°±ä¼šå˜å¾—éå¸¸å…³é”®ã€‚</p><p><img src="`+e+`" alt="æ„å»ºé¡ºåº"></p><p>æˆ‘ä»¬å°†ç»„ä»¶åº“çš„æ•´ä½“æ„å»ºå‘½ä»¤å†™å…¥æ ¹ç›®å½•ä¸‹çš„ package.jsonï¼Œåç»­æˆ‘ä»¬å°†é€šè¿‡ pnpm run build:ui æ›´å¿«æ·åœ°æ‰§è¡Œæ„å»ºã€‚</p><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  // ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;scripts&quot;: {</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#F07178;">   &quot;hello&quot;: &quot;echo &#39;hello world&#39;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#C3E88D;">   &quot;build:ui&quot;: &quot;pnpm --filter ./packages/** run build&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  },</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="æ­å»º-demo-åº”ç”¨æ¼”ç¤ºç»„ä»¶æ•ˆæœ" tabindex="-1">æ­å»º demo åº”ç”¨æ¼”ç¤ºç»„ä»¶æ•ˆæœ <a class="header-anchor" href="#æ­å»º-demo-åº”ç”¨æ¼”ç¤ºç»„ä»¶æ•ˆæœ" aria-label="Permalink to &quot;æ­å»º demo åº”ç”¨æ¼”ç¤ºç»„ä»¶æ•ˆæœ&quot;">â€‹</a></h2><p>æˆ‘ä»¬æ­£å¥½å€ŸåŠ©åˆ›å»º demo æ¼”ç¤ºæ¨¡å—æ¥ç»™å¤§å®¶åˆ†äº«å¦‚ä½•åœ¨ monorepo é¡¹ç›®é‡Œå»ºç«‹ä¸€ä¸ªç½‘ç«™åº”ç”¨æ¨¡å—ã€‚æˆ‘ä»¬å…ˆè®¾ç½®å¥½ demo æ¨¡å—çš„ç›®å½•ç»“æ„ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ğŸ“¦wonderful-element</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚...</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚demo</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚node_modules</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚dist</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚public</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚src</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“‚main.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œApp.vue</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œindex.html</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œvite.config.ts</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”£</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œtsconfig.json</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">â”ƒ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">â”—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ğŸ“œpackage.json</span></span></code></pre></div><p>ç”±äº demo æ˜¯æ–°æ·»åŠ çš„æ¨¡å—ï¼Œéœ€è¦åœ¨ pnpm-workspace.yaml ä¸­è¡¥å……å£°æ˜è¿™ä¸ªå·¥ä½œç©ºé—´ï¼š</p><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">// pnpm-workspace.yaml</span></span>
<span class="line"><span style="color:#A6ACCD;">packages:</span></span>
<span class="line"><span style="color:#A6ACCD;">  - docs</span></span>
<span class="line"><span style="color:#A6ACCD;">  - packages/*</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#C3E88D;"> - demo</span></span></code></pre></div><p>ç¼–è¾‘ demo æ¨¡å—çš„ package.jsonï¼š</p><ul><li>å°† wonderful-element å£°æ˜ä¸ºä¾èµ–é¡¹ï¼Œå¯¼å…¥æ‰€æœ‰ç»„ä»¶ï¼›</li><li>script è„šæœ¬ä¸­æ·»åŠ  vite dev å‘½ä»¤ç”¨äºè¿è¡Œåº”ç”¨ï¼›</li><li>private è®¾ç½®ä¸º true é¿å…è¢«å½“åš npm åŒ…å‘å¸ƒã€‚</li><li>å®Œæˆç¼–è¾‘åï¼Œä¸è¦å¿˜è®°æ‰§è¡Œ pnpm i -w æ›´æ–°æ•´ä¸ªé¡¹ç›®çš„ä¾èµ–ã€‚</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// demo/package.json</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ³¨æ„å®æ“æ—¶åˆ é™¤æ³¨é‡Šï¼Œpackage.json ä¸æ”¯æŒæ³¨é‡Š</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@wonderful-element/demo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">private</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// å¯åŠ¨ vite å¼€å‘æœåŠ¡å™¨è¿è¡Œåº”ç”¨</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">dev</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vite dev</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">dependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">wonderful-element</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">workspace:^</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">devDependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Web åº”ç”¨æ˜¯ä»¥ index.html ä½œä¸ºå…¥å£çš„ã€‚</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- demo/index.html --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">doctype</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width=device-width, initial-scale=1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">DEMO</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/src/main.ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>vite.config é‡‡å–é»˜è®¤é…ç½®å³å¯ï¼Œåªéœ€åŠ å…¥ vue æ’ä»¶ã€‚</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// demo/vite.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> vue </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@vitejs/plugin-vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#82AAFF;">vue</span><span style="color:#A6ACCD;">()]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>ä¹‹åç¼–è¾‘æºç ã€‚å¯¹äº ts çš„æŠ¥é”™æˆ‘ä»¬æš‚ä¸ç†ä¼šï¼Œåœ¨é›†æˆå®Œ TypeScript åä¼šæŠ¥é”™éƒ½ä¼šæ¶ˆå¤±ã€‚</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// demo/src/main.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">createApp</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> App </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./App.vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">createApp</span><span style="color:#A6ACCD;">(App)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mount</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#app</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- demo/src/App.vue --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Button</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Input</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wonderful-element</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">1111</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>æœ€åï¼Œæ‰§è¡Œ demo æ¨¡å—çš„ dev å‘½ä»¤ï¼Œå¯åŠ¨åº”ç”¨ã€‚</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--filter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@wonderful-element/demo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dev</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># è¾“å‡ºå†…å®¹</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">VITE</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v4.4.4</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">ready</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">534</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ms</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">âœ</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">Local:</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">http://localhost:5173/</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">âœ</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">Network:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--host</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">expose</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">âœ</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">press</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">h</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">show</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">help</span></span></code></pre></div><p><img src="`+t+'" alt="demo"></p><h2 id="ç»“å°¾ä¸èµ„æ–™æ±‡æ€»" tabindex="-1">ç»“å°¾ä¸èµ„æ–™æ±‡æ€» <a class="header-anchor" href="#ç»“å°¾ä¸èµ„æ–™æ±‡æ€»" aria-label="Permalink to &quot;ç»“å°¾ä¸èµ„æ–™æ±‡æ€»&quot;">â€‹</a></h2><p>ç”±äºç¯‡å¹…åŸå› ï¼Œä¸ŠåŠç¯‡åªå®Œæˆäº† Vite çš„é›†æˆï¼ŒTypeScript çš„å®è·µéƒ¨åˆ†æ”¾åœ¨ä¸‹åŠç¯‡å®Œæˆã€‚</p><p>æœ¬ç« æ¶‰åŠåˆ°çš„ç›¸å…³èµ„æ–™æ±‡æ€»å¦‚ä¸‹ï¼š</p><p>å®˜ç½‘ä¸æ–‡æ¡£ï¼š</p><p><a href="https://code.visualstudio.com/" target="_blank" rel="noreferrer">VSCode</a></p><p><a href="https://www.jetbrains.com/webstorm/" target="_blank" rel="noreferrer">WebStorm</a></p><p><a href="https://pnpm.io/zh/" target="_blank" rel="noreferrer">pnpm</a></p><p><a href="https://cn.vitejs.dev/" target="_blank" rel="noreferrer">Vite</a></p><p><a href="https://cn.vuejs.org/" target="_blank" rel="noreferrer">Vue</a></p><p><a href="https://rollupjs.org/guide/zh/" target="_blank" rel="noreferrer">Rollup</a></p><p><a href="https://www.typescriptlang.org/zh/" target="_blank" rel="noreferrer">TypeScript</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/CSS_preprocessor" target="_blank" rel="noreferrer">CSS é¢„å¤„ç†å™¨</a></p><p><a href="https://sass-lang.com/" target="_blank" rel="noreferrer">Sass</a></p><p><a href="https://less.bootcss.com/" target="_blank" rel="noreferrer">Less</a></p><p><a href="https://stylus.bootcss.com/" target="_blank" rel="noreferrer">Stylus</a></p><p><a href="https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue" target="_blank" rel="noreferrer">@vitejs/plugin-vue</a></p>',151),C=[r];function y(D,A,F,i,u,d){return n(),a("div",null,C)}const m=s(c,[["render",y]]);export{g as __pageData,m as default};
