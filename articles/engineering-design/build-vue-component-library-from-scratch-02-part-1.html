<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从零搭建Vue组件库——02.在 Monorepo 模式下集成 Vite 和 TypeScript - Part 1 | Lucas Liu's 博客</title>
    <meta name="description" content="Lucas Liu's 博客">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/blog/assets/style.DRiJLsDk.css" as="style">
    <link rel="preload stylesheet" href="/blog/vp-icons.css" as="style">
    
    <script type="module" src="/blog/assets/app.BMu4rgZ1.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.CW-mWicN.js">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.GBc956F4.js">
    <link rel="modulepreload" href="/blog/assets/articles_engineering-design_build-vue-component-library-from-scratch-02-part-1.md.CZLBjwPs.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a4e86ff1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-35bff68f></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-35bff68f> Skip to content </a><!--]--><!----><header class="VPNav" data-v-a4e86ff1 data-v-623cca6d><div class="VPNavBar" data-v-623cca6d data-v-9cfb25cf><div class="wrapper" data-v-9cfb25cf><div class="container" data-v-9cfb25cf><div class="title" data-v-9cfb25cf><div class="VPNavBarTitle has-sidebar" data-v-9cfb25cf data-v-0f9dbf14><a class="title" href="/blog/" data-v-0f9dbf14><!--[--><!--]--><!----><span data-v-0f9dbf14>学海拾贝</span><!--[--><!--]--></a></div></div><div class="content" data-v-9cfb25cf><div class="content-body" data-v-9cfb25cf><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9cfb25cf><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9cfb25cf data-v-33416791><span id="main-nav-aria-label" class="visually-hidden" data-v-33416791> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/articles/" tabindex="0" data-v-33416791 data-v-a3915720><!--[--><span data-v-a3915720>全部文章</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://liuhq8796.github.io/" target="_blank" rel="noreferrer" tabindex="0" data-v-33416791 data-v-a3915720><!--[--><span data-v-a3915720>关于我</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9cfb25cf data-v-75f40ecb><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-75f40ecb data-v-11418d23 data-v-69a672e6><span class="check" data-v-69a672e6><span class="icon" data-v-69a672e6><!--[--><span class="vpi-sun sun" data-v-11418d23></span><span class="vpi-moon moon" data-v-11418d23></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9cfb25cf data-v-f9816638 data-v-1c1a2a8b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/liuhq8796/blog" aria-label="github" target="_blank" rel="noopener" data-v-1c1a2a8b data-v-63d76fbe><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9cfb25cf data-v-c5e84e38 data-v-33cfc8b7><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-33cfc8b7><span class="vpi-more-horizontal icon" data-v-33cfc8b7></span></button><div class="menu" data-v-33cfc8b7><div class="VPMenu" data-v-33cfc8b7 data-v-97317890><!----><!--[--><!--[--><!----><div class="group" data-v-c5e84e38><div class="item appearance" data-v-c5e84e38><p class="label" data-v-c5e84e38>深色模式</p><div class="appearance-action" data-v-c5e84e38><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-c5e84e38 data-v-11418d23 data-v-69a672e6><span class="check" data-v-69a672e6><span class="icon" data-v-69a672e6><!--[--><span class="vpi-sun sun" data-v-11418d23></span><span class="vpi-moon moon" data-v-11418d23></span><!--]--></span></span></button></div></div></div><div class="group" data-v-c5e84e38><div class="item social-links" data-v-c5e84e38><div class="VPSocialLinks social-links-list" data-v-c5e84e38 data-v-1c1a2a8b><!--[--><a class="VPSocialLink no-icon" href="https://github.com/liuhq8796/blog" aria-label="github" target="_blank" rel="noopener" data-v-1c1a2a8b data-v-63d76fbe><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9cfb25cf data-v-b281b266><span class="container" data-v-b281b266><span class="top" data-v-b281b266></span><span class="middle" data-v-b281b266></span><span class="bottom" data-v-b281b266></span></span></button></div></div></div></div><div class="divider" data-v-9cfb25cf><div class="divider-line" data-v-9cfb25cf></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a4e86ff1 data-v-f0ed2b66><div class="container" data-v-f0ed2b66><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f0ed2b66><span class="vpi-align-left menu-icon" data-v-f0ed2b66></span><span class="menu-text" data-v-f0ed2b66>目录</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-f0ed2b66 data-v-2605424a><button data-v-2605424a>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-a4e86ff1 data-v-3a80e6ba><div class="curtain" data-v-3a80e6ba></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-3a80e6ba><span class="visually-hidden" id="sidebar-aria-label" data-v-3a80e6ba> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/js/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>JS</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/js/basic-utility-functions-in-axios-source-code.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>Axios 源码中的基础工具函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/js/convert-a-value-to-an-array.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>将一个值转换为一个数组</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/js/how-to-elegantly-catch-errors-from-await.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>如何优雅的捕获 await 的错误</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/js/how-to-ignore-keyboard-events-in-ime.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>如何忽略输入法中的键盘事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/js/remove-properties-from-an-object.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>剔除对象中的属性</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/js/tiny-queue-data-structure.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>微小的队列数据结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/js/validate-npm-package-name.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>验证 npm 包名是否合法</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/ts/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>TS</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/ts/basic-utility-functions-in-vue2-source-code.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>Vue2 源码中的基础工具函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/ts/basic-utility-functions-in-vue3-source-code.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>Vue3 源码中的基础工具函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/ts/type-challenges-challenge-record-simple-level.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>type challenges 挑战记录 —— 简单级别</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><div class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/html/" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>HTML</p><!--]--></a><!----></div><!----></div></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/css/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>CSS</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/css/bem-and-atomic-css-methodology.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>BEM 与 Atomic CSS 方法论</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/css/hides-the-crack-effect-when-the-img-is-empty.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>隐藏 img 为空时的图裂效果</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/css/reset-box-sizing-best-practice.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>重置 box-sizing 的最佳实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/css/several-methods-of-overlapping-element-positioning.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>元素重叠定位的几种方法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/css/webp-image-elegant-degradation-scheme.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>WebP 图片的优雅降级方案</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/vue/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>Vue</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/vue/how-this-gets-data-and-methods.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>this 是如何获取 data 和 methods 的</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/vue/how-to-write-a-reactivity-system.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>怎样手写一个响应式系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/vue/solution-for-component-types-that-cannot-be-recognized.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>无法识别组件类型的解决方案</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/vue/vscode-code-snippets-for-vue.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>适用于 vue 的 VSCode 代码片段</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/vite/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>Vite</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/vite/interpreting-the-create_vite-source-code.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>解读 create-vite 源码</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/node/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>Node</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/node/get-all-tags-of-a-remote-git-repository.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>获取远程 git 仓库所有 tags</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/node/one-line-of-code-unifies-the-package-manager.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>一行代码统一规范包管理器</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/nginx/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>Nginx</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/nginx/javascript-in-nginx-configuration.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>Nginx 配置中的 JavaScript</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link has-active" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/engineering-design/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>工程化设计</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-00.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>从零搭建Vue组件库——00.系列大纲</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>从零搭建Vue组件库——01.搭建 Monorepo 项目结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-02-part-1.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>从零搭建Vue组件库——02.在 Monorepo 模式下集成 Vite 和 TypeScript - Part 1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-02-part-2.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>从零搭建Vue组件库——02.在 Monorepo 模式下集成 Vite 和 TypeScript - Part 2</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>程序设计</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/object-oriented-00.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>面向对象——00.什么是面向对象</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/object-oriented-01.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>面向对象——01.四大特性</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/object-oriented-02.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>面向对象——02.面向对象编程中的面向过程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/object-oriented-03.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>面向对象——03.抽象类 vs 接口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/object-oriented-04.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>面向对象——04.基于接口而非实现编程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/object-oriented-05.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>面向对象——05.多用组合少用继承</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/object-oriented-06.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>面向对象——06.贫血模型与充血模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/object-oriented-07.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>面向对象——07.类与类之间的交互关系</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/programming-principles-00.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>设计原则——00.单一职责原则</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/programming-principles-01.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>设计原则——01.开闭原则</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/programming-principles-02.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>设计原则——02.里氏替换原则</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/programming-principles-03.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>设计原则——03.接口隔离原则</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/programming-principles-04.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>设计原则——04.控制反转、依赖注入、依赖反转</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/programming-principles-05.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>设计原则——05.KISS 原则与 YAGNI 原则</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/programming-principles-06.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>设计原则——06.DRY 原则</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/programming/programming-principles-07.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>设计原则——07.迪米特法则</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/reading/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>阅读</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/reading/nonviolent-communication.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>《非暴力沟通》</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28819347><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-28819347 data-v-d6f1539d><div class="item" tabindex="0" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/linux/" data-v-d6f1539d><!--[--><h2 class="text" data-v-d6f1539d>Linux</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-d6f1539d><span class="vpi-chevron-right caret-icon" data-v-d6f1539d></span></div></div><div class="items" data-v-d6f1539d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/linux/change-file-permissions.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>Linux 更改文件的权限</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/linux/common-shortcut-keys.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>Linux 常用快捷键</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/linux/how-to-shut-down-and-restart-linux-correctly.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>Linux 如何正确关机、重启</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/linux/linux-file-and-directory-management-exercises.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>极客时间《跟阿铭学 Linux》—— 《第 4 章 Linux文件和目录管理》课后习题</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/linux/linux-file-properties.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>Linux 文件属性</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d6f1539d data-v-d6f1539d><div class="item" data-v-d6f1539d><div class="indicator" data-v-d6f1539d></div><a class="VPLink link link" href="/blog/articles/linux/the-directory-structure-of-Linux.html" data-v-d6f1539d><!--[--><p class="text" data-v-d6f1539d>Linux 的目录结构</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a4e86ff1 data-v-fd0425d9><div class="VPDoc has-sidebar has-aside" data-v-fd0425d9 data-v-815a666e><!--[--><!--]--><div class="container" data-v-815a666e><div class="aside" data-v-815a666e><div class="aside-curtain" data-v-815a666e></div><div class="aside-container" data-v-815a666e><div class="aside-content" data-v-815a666e><div class="VPDocAside" data-v-815a666e data-v-0ca1c0cd><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-0ca1c0cd data-v-fc960a60><div class="content" data-v-fc960a60><div class="outline-marker" data-v-fc960a60></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-fc960a60>页面导航</div><ul class="VPDocOutlineItem root" data-v-fc960a60 data-v-2ba90e6c><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-0ca1c0cd></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-815a666e><div class="content-container" data-v-815a666e><!--[--><!--]--><main class="main" data-v-815a666e><div style="position:relative;" class="vp-doc _blog_articles_engineering-design_build-vue-component-library-from-scratch-02-part-1" data-v-815a666e><div><h1 id="从零搭建vue组件库——02-在-monorepo-模式下集成-vite-和-typescript-part-1" tabindex="-1">从零搭建Vue组件库——02.在 Monorepo 模式下集成 Vite 和 TypeScript - Part 1 <a class="header-anchor" href="#从零搭建vue组件库——02-在-monorepo-模式下集成-vite-和-typescript-part-1" aria-label="Permalink to &quot;从零搭建Vue组件库——02.在 Monorepo 模式下集成 Vite 和 TypeScript - Part 1&quot;">​</a></h1><blockquote><p>本文参考了稀土掘金上蘑菇王的系列文章——<a href="https://juejin.cn/post/7254341178258505788" target="_blank" rel="noreferrer">《从 0 到 1 搭建 Vue 组件库框架》</a>，并通过 Github Copilot 的辅助编写功能进行了修改和补充。</p></blockquote><h2 id="导航" tabindex="-1">导航 <a class="header-anchor" href="#导航" aria-label="Permalink to &quot;导航&quot;">​</a></h2><p>系列导航：<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-00.html">00.系列大纲</a></p><p>上一篇：<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">01.搭建 Monorepo 项目结构</a></p><p>下一篇：<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-02-part-2.html">02.在 Monorepo 模式下集成 Vite 和 TypeScript - Part 2</a></p><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><p>在上一章节中，我们完成了“新建文件夹”的操作，使用 pnpm 为我们的组件库搭建了 monorepo 目录结构。在本章节，我们的组件库工程会开始初成体系——加入构建工具 Vite 和 TypeScript 类型支持，能够真正通过构建生成产物，并充分发挥出 monorepo 模式下开发的灵活性。</p><h2 id="vite-介绍" tabindex="-1">Vite 介绍 <a class="header-anchor" href="#vite-介绍" aria-label="Permalink to &quot;Vite 介绍&quot;">​</a></h2><blockquote><p>Vite 是一个由原生 ESM 驱动的 Web 开发构建工具，能够显著提升前端开发体验。</p></blockquote><p>Vite 是一个新型的前端构建工具，它的特点是：</p><ul><li>快速的冷启动：Vite 通过 ES Module 的方式，利用浏览器去解析 import，按需编译。</li><li>即时的热模块更新：Vite 通过 <a href="https://v3.cn.vuejs.org/guide/migration/hmr.html#%E6%A6%82%E8%BF%B0" target="_blank" rel="noreferrer">HMR</a> 实现了模块级别的热更新。</li><li>真正的按需编译：Vite 仅仅会编译那些被请求的模块，而不是像 Webpack 那样把所有的模块都编译一遍。</li></ul><p>在我看来，Vite 的快更多地体现在了配置的快、上手的快。对于绝大多数复杂度有限的场景，Vite 都可谓实现了“构建的最佳实践”，大部分工程能力几乎都是开箱即用，极大地减少了构建配置的成本。即使你有深度使用的需求，Vite 也具有 自定义插件 的能力以及良好的 周边生态。</p><p>在当下，如果你想要接触一款前端构建工具，我强烈推荐从 Vite 入手。Vite 对于构建工具的初学者而言，能够大幅减少使用传统构建工具时繁琐的概念理解、插件选型、插件文档阅读的困难，快速建立起正反馈，这样才有不断深入学习下去的动力。</p><h2 id="基本依赖安装" tabindex="-1">基本依赖安装 <a class="header-anchor" href="#基本依赖安装" aria-label="Permalink to &quot;基本依赖安装&quot;">​</a></h2><p>在更多操作开始前，我们先强调一下系列分享编写代码所使用的 IDE 为 VSCode。在操作过程中会涉及相当多的 IDE 使用技巧，如果使用 WebStorm 等其他 IDE 的话，这些知识可能是无法即刻应用的，需要读者自行变通。</p><h3 id="npmrc-文件-可选" tabindex="-1">.npmrc 文件（可选） <a class="header-anchor" href="#npmrc-文件-可选" aria-label="Permalink to &quot;.npmrc 文件（可选）&quot;">​</a></h3><p>在安装依赖前，先给大家介绍一下 .npmrc 文件，我们试着在项目的根目录下建立 .npmrc 文件。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .npmrc</span></span></code></pre></div><p>这个 .npmrc 文件相当于项目级的 npm 配置：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://registry.npm.taobao.org</span></span></code></pre></div><p>上面的配置相当于切换 npm 镜像源为 <a href="https://registry.npm.taobao.org" target="_blank" rel="noreferrer">https://registry.npm.taobao.org</a>，只不过配置只在当前项目目录下生效，优先级高于用户设置的本地配置。</p><p>这个效果是不是很像 npm set config registry <a href="https://registry.npm.taobao.org" target="_blank" rel="noreferrer">https://registry.npm.taobao.org</a> ？是的，npm set config 的本质是修改用户级的 .npmrc 文件，这个文件在 C:\Users${用户名}.npmrc(Windows 系统) 或者 ~/.npmrc(Linux 系统) 位置。</p><p>我推荐大家将一些必要的配置放在这个项目级的 .npmrc 文件中，并且将这个文件提交到代码仓，这样就可以使后续贡献的其他用户免去许多环境配置的麻烦，尤其是在公司的内网环境下，各式各样的 npm 私仓和代理配置让很多新人头疼。</p><p>当然，如果你是开源项目，就不是很推荐你在里面做网络环境相关的配置了，因为每个贡献者的网络环境是多样化的，这时项目级的 .npmrc 就只适合放一些与包管理相关的配置。</p><h3 id="安装公共构建依赖" tabindex="-1">安装公共构建依赖 <a class="header-anchor" href="#安装公共构建依赖" aria-label="Permalink to &quot;安装公共构建依赖&quot;">​</a></h3><p>接下来，我们要在根目录下安装所需的构建工具：Vite 和 TypeScript。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -wD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> typescript</span></span></code></pre></div><p>因为每个包都需要用到 Vite 和 TypeScript 进行构建，我们在上一章 <a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">从零搭建Vue组件库——01.搭建 Monorepo 项目结构</a> 讲过，公共开发依赖统一安装在根目录下，是可以被各个子包正常使用的。</p><p>由于我们要构建的是 Vue 组件库，Vue 推荐的组件开发范式 单文件组件 SFC 并不是原生的 Web 开发语法，而是 Vue 方面定义的“方言”，需要经过一个编译为原生 js 的过程。因此我们需要引入相关的 Vite 插件 @vitejs/plugin-vue，这个插件集成了 vue 编译器的能力，使得构建工具能够理解 Vue SFC 模板。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -wD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @vitejs/plugin-vue</span></span></code></pre></div><p>vue 应该被安装到根目录下的 dependencies，因为几乎所有子包的 peerDependencies 中都具有 vue(peerDependencies 相关可以复习<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">从零搭建Vue组件库——01.搭建 Monorepo 项目结构</a>)，我们结合 pnpm 的 resolve-peers-from-workspace-root 机制，可以统一所有子包中 vue 的版本</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -wS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vue</span></span></code></pre></div><p>关于 <a href="https://pnpm.io/zh/npmrc#resolve-peers-from-workspace-root" target="_blank" rel="noreferrer">resolve-peers-from-workspace-root</a> 的说明：</p><blockquote><p>默认为 true。 启用后，将会使用根工作区项目的 dependencies 解析工作区中任何项目的 peer dependencies。这是一个有用的功能，因为你可以只在工作区的根目录中安装 peer dependencies，并且确保工作区中的所有项目都使用相同版本的 peer dependencies。</p></blockquote><p>这一步操作正确的标志，是根目录 node_modules/.pnpm 路径下的 vue 系列包只有一个版本。如果同时出现 3.0.0 和 3.x.x 的 vue，说明操作未到位，3.0.0 版本的 vue 将导致构建过程中出现错误。</p><p><img src="/blog/assets/deps.BuNFIKWw.png" alt="依赖文件"></p><p>另外，如果喜欢使用 CSS 预处理器的话，也要在根目录下进行安装，这里我选择安装 Sass，大家也可以根据自己的喜好选择其他的预处理器，例如 Less、Stylus 等。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -wD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sass</span></span></code></pre></div><h2 id="vite-集成" tabindex="-1">Vite 集成 <a class="header-anchor" href="#vite-集成" aria-label="Permalink to &quot;Vite 集成&quot;">​</a></h2><p>为了成功集成 Vite，让我们的组件库能够构建出产物，这里我们需要完成三个步骤，分别是：</p><ul><li>编写构建目标源码。因为本系列文章的重点是工程化而为组件库的开发，代码预备部分我们不会实现组件的实际功能，只给出能够提现构建要点的 demo 代码。</li><li>准备 vite.config 配置文件。</li><li>在 package.json 中设置构建脚本。</li></ul><p>我们先回顾上一章节所规划的 monorepo 目录机构，在集成 Vite 的过程中，我们会对它做非常多的扩展：</p><ol><li>对于 packages 目录下的每一个组件包，我们制定了更细的源码组织规则： <ul><li>各种配置文件，如 package.json、vite.config.ts(js)，都放在模块根目录下。</li><li>src 目录下存放源码，其中 src/index.ts(js) 作为这个模块的总出口，所有需要暴露给外部供其他模块使用的方法、对象都要在这里声明导出。</li><li>dist 目录作为产物输出目录，当然如果没执行过构建命令，这个目录是不会生成的。</li></ul></li><li>在 packages 目录下新建统一出口包，命名为 wonderful-element。正如 element-plus 主包负责集合各个子包，并统一导出其中内容一般。</li><li>我们还没走到搭建 demo 文档的阶段，但又迫不及待地想看到组件的实际效果，为了满足这个需求，我们要在根目录下建立 demo 模块，这个模块是一个 Web 应用，用来展示组件，同时验证我们的 monorepo 架构是否能立即响应子模块的更新修改。</li><li>关于 tsconfig，我们会在集成 TypeScript 的阶段进行说明。</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">📦wonderful-element</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂docs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂demo</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # 展示组件效果的 Web 应用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂node_modules</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂dist</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂public</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜tsconfig.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂packages</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂button</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂node_modules</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂dist</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 组件产物目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂src</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 组件源码目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜Button.vue</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜index.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂input</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂shared</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂wonderful-element</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # 组件库主包，各组件的统一出口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜tsconfig.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜tsconfig.base.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜tsconfig.node.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜tsconfig.src.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜pnpm-workspace.yaml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜README.md</span></span></code></pre></div><p>因为我们规定了每个模块的 dist 都作为产物输出目录，而输出产物是不需要入仓的(clone 代码后执行构建命令就能生成)，所以要注意在根目录的 .gitignore 中添加产物目录 dist：</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .gitignore</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">node_modules</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+dist</span></span></code></pre></div><h3 id="公共方法代码预备" tabindex="-1">公共方法代码预备 <a class="header-anchor" href="#公共方法代码预备" aria-label="Permalink to &quot;公共方法代码预备&quot;">​</a></h3><p>在上一章的规划中(<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">从零搭建Vue组件库——01.搭建 Monorepo 项目结构</a>)，我们安排 @wonderful-element/shared 作为公具方法包，将成为所有其他模块的依赖项。</p><p>我们假定工具方法中有一个打印 Hello World 的方法。另外，为了演示引入外部依赖的工程能力，我们还要导出一个方法 useLodash，这个方法原封不动地返回 lodash 实例对象。index.ts 会作为出口统一导出这些方法。下面展示操作步骤。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 模块源码目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">📦shared</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜hello.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜index.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜useLodash.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 为 shared 包安装 lodash 相关依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @wonderful-element/shared</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lodash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @types/lodash</span></span></code></pre></div><p>正在学习 TypeScript 的同学，如果对语法存在疑惑，可以及时前往 <a href="https://www.typescriptlang.org/zh/" target="_blank" rel="noreferrer">TypeScript 官网</a> 补充知识。</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/shared/src/hello.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">to</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;World&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> txt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `Hello ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}!`</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(txt)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> txt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/shared/src/useLodash.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lodash </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;lodash&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLodash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lodash</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/shared/src/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./hello&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./useLodash&#39;</span></span></code></pre></div><h3 id="组件代码预备" tabindex="-1">组件代码预备 <a class="header-anchor" href="#组件代码预备" aria-label="Permalink to &quot;组件代码预备&quot;">​</a></h3><h4 id="button-组件" tabindex="-1">button 组件 <a class="header-anchor" href="#button-组件" aria-label="Permalink to &quot;button 组件&quot;">​</a></h4><p>我们先设置 button 组件的初始代码，为了演示 monorepo 工程中内部模块之间互相依赖的特性，我们假定按钮组件的用例为点击之后打印 Hello ${props.hello}，那么 button 将依赖于先前定义的 shared 模块中的 hello 方法。我们先通过 pnpm workspace 命令声明内部模块关联：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wonderful-element/button</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wonderful-element/shared</span></span></code></pre></div><p>当然，我们也可以先在子模块下的 package.json 中按照 workspace 协议 手动声明内部依赖，然后通过 pnpm -w i 执行全局安装，也能达到和上面那条命令一样的效果，两种方式二选一即可。</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// packages/button/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;dependencies&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+   &quot;wonderful-element/shared&quot;: &quot;workspace:^&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>接下来，实现 button 组件代码，并在 index.ts 中导出。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">📦button</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜button.vue</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜index.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span></code></pre></div><p>正在学习 Vue 框架的同学，如果对 demo 代码存在疑惑，可以及时前往 <a href="https://cn.vuejs.org/" target="_blank" rel="noreferrer">Vue 官网</a> 补充知识。</p><p>注意，这里 import from &#39;wonderful-element/shared&#39; 语句在 IDE 中可能会出现 ts 报错，这个不影响构建，我们暂时忽略它，在后续 TypeScript 实操部分会解决。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // packages/button/src/button.vue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { hello } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;wonderful-element/shared&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> withDefaults</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    defineProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }&gt;(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;World&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clickHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.text)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w-button&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clickHandler&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">slot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">slot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/button/src/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Button </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./button.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Button }</span></span></code></pre></div><h4 id="input-组件" tabindex="-1">input 组件 <a class="header-anchor" href="#input-组件" aria-label="Permalink to &quot;input 组件&quot;">​</a></h4><p>按照类似的方式，也简单实现处理一下 input 模块。我们假定 input 输入框组件实现的用例是监听内容变化，调用 hello 方法打印当前输入的内容。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wonderful-element/input</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wonderful-element/shared</span></span></code></pre></div><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // packages/input/src/input.vue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { hello } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;wonderful-element/shared&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  withDefaults</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    defineProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      modelValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }&gt;(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      modelValue: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> emit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineEmits</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;update:modelValue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }&gt;()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inputHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e.target.value</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;update:modelValue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    hello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;w-input&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;modelValue&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;inputHandler&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/input/src/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Input </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./input.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Input }</span></span></code></pre></div><h3 id="统一出口包" tabindex="-1">统一出口包 <a class="header-anchor" href="#统一出口包" aria-label="Permalink to &quot;统一出口包&quot;">​</a></h3><p>wonderful-element 模块作为各个组件的统一出口，需要在 package.json 中正确声明与所有组件的依赖关系，之后每增加一个新组件，都应该在 wonderful-element 模块中补充导出代码。</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/wonderful-element/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 其他字段完全参考 button 即可</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;wonderful-element/button&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:^&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;wonderful-element/input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:^&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;wonderful-element/shared&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:^&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>完成声明后，执行 pnpm -w i 更新依赖。</p><p>之后在 src/index.ts 文件中将各个模块的内容导出即可。</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/wonderful-element/src/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;wonderful-element/button&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;wonderful-element/input&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;wonderful-element/shared&#39;</span></span></code></pre></div><h3 id="构建公共方法模块-纯-js-ts-代码" tabindex="-1">构建公共方法模块(纯 JS/TS 代码) <a class="header-anchor" href="#构建公共方法模块-纯-js-ts-代码" aria-label="Permalink to &quot;构建公共方法模块(纯 JS/TS 代码)&quot;">​</a></h3><p>按照 <a href="https://cn.vitejs.dev/config/#config-intellisense" target="_blank" rel="noreferrer">Vite 官方介绍的配置方法</a>，我们在公共方法模块 shared 包中添加 vite.config.ts，这个配置文件将告诉 vite 如何构建这个模块。</p><p>组件库项目的模块自然要以库模式构建，Vite 能够很好地支持这种构建方式，官方文档也对这种用法进行了 <a href="https://cn.vitejs.dev/guide/build.html#library-mode" target="_blank" rel="noreferrer">说明</a>。</p><p>我们编写一个库模式下最简单的 vite.config 文件，并将 package.json 中的 build 脚本修改成 Vite 构建指令。</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/shared/vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 产物输出目录，默认值就是 dist。我们使用默认值，注释掉此字段。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // outDir: &#39;dist&#39;,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 参考：https://cn.vitejs.dev/config/build-options.html#build-lib</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lib: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 构建的入口文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      entry: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/index.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 产物的生成格式，默认为 [&#39;es&#39;, &#39;umd&#39;]。我们使用默认值，注释掉此字段。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // formats: [&#39;es&#39;, &#39;umd&#39;],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 当产物为 umd、iife 格式时，该模块暴露的全局变量名称</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;WonderfulElementShared&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 产物文件名称</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fileName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wonderful-element-shared&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 为了方便学习，查看构建产物，将此置为 false，不要混淆产物代码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minify: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// packages/shared/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;scripts&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-   &quot;build&quot;: &quot;echo build&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+   &quot;build&quot;: &quot;vite build&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;test&quot;: &quot;echo test&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>之后，执行 shared 包的构建指令，Vite 会自动读取对应的 vite.config 文件，生成构建产物。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @wonderful-element/shared</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 以下为指令输出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.4.4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">✓</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transformed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dist/wonderful-element-shared.mjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  213.46</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 41.73</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dist/wonderful-element-shared.umd.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  224.92</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 42.24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">✓</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 751ms</span></span></code></pre></div><p>在默认情况下，Vite 会为我们生成 .mjs 和 .umd.js 后缀的产物，可以满足绝大多数情况下对于产物格式的要求。其中 .mjs 对应 esm 格式的可用产物，.umd.js 对应 cjs 格式的可用产物。我们按照产物的路径，在 package.json 中修改对应的入口字段(回顾：<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">从零搭建Vue组件库——01.搭建 Monorepo 项目结构</a>)：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/shared/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 省略其他无关配置 ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/wonderful-element-shared.umd.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/wonderful-element-shared.mjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;require&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/wonderful-element-shared.umd.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/wonderful-element-shared.mjs&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>但是，我们仅仅导出了两个很短小的方法，生成的产物却有 200K 之大，这是为什么呢？这时因为我们安装的 npm 包 lodash 的代码也被打包进来了。</p><p>构建工具打包时默认行为，是将所有涉及模块的代码都一并集合到产物中。这在打包 Web 应用的时候是没问题的，因为浏览器并不能识别 npm 模块，所以产物就需要包含所有代码。可我们正在打包的东西将作为 npm 包给其他应用安装，在工程环境下，构建工具是可以识别模块引入语法的。</p><p>因此，我们在为 库 / npm 包 构建产物时，在实践中通常会将依赖项(package.json 中 dependencies、peerDependencies 字段下的依赖)声明为 external(外部依赖)，使这个依赖相关的源码不被整合进产物，而是保留着 import xxx from &#39;pkg&#39; 的导入语句。</p><p>我们修改 vite.config 文件，增加 rollupOptions 选项，将依赖项 lodash 声明为外部模块：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/shared/vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 其他配置...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 参考：https://cn.vitejs.dev/config/build-options.html#build-rollupoptions</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 确保外部化处理那些你不想打包进库的依赖</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      external: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">lodash</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      output: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 在 UMD 构建模式下为这些外部化的依赖提供一个全局变量。即使不设置，构建工具也会为我们自动生成。个人倾向于不设置</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        globals: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          lodash: &#39;lodash&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>再次执行构建指令，我们可以看到产物体积大幅缩小。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @wonderful-element/shared</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 以下为指令输出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.4.4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">✓</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transformed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dist/wonderful-element-shared.mjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lodash&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lodash&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dist/wonderful-element-shared.umd.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.69</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.36</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">✓</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 93ms</span></span></code></pre></div><p>检查 dist 目录下的产物可以发现，外部依赖 lodash 不再被打包进源码，而是保持原本的引入语句。外部化处理依赖对于库的开发者而言是一件非常严肃的事情，产物的大小会直接影响下游用户的使用体验。</p><p><img src="/blog/assets/dist-size.B2X6oqC8.png" alt="构建大小"></p><h3 id="构建组件模块-包含-vue-sfc-模板" tabindex="-1">构建组件模块(包含 Vue SFC 模板) <a class="header-anchor" href="#构建组件模块-包含-vue-sfc-模板" aria-label="Permalink to &quot;构建组件模块(包含 Vue SFC 模板)&quot;">​</a></h3><p>不同于公共方法模块的纯 ts/js 代码，Vue 组件通常要涉及到对开发范式 <a href="https://cn.vuejs.org/guide/scaling-up/sfc.html" target="_blank" rel="noreferrer">单文件组件 SFC</a> 的识别。幸运的是，Vite 提供了官方插件 <a href="https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue" target="_blank" rel="noreferrer">@vitejs/plugin-vue</a> 来处理这个复杂的编译任务。</p><p>我们以 button 模块为例子来演示 Vue 组件的构建配置：</p><ul><li>在先前 shared 模块的基础上，我们需要进一步加入插件 @vitejs/plugin-vue 来处理 .vue 文件。</li><li>依赖外部化处理也要注意，button 模块依赖的 shared 模块因为在 dependencies 字段中已声明，因此将其排除。同时 peerDependencies vue 也应当被排除。</li><li>将 package.json 中的 build 命令更换为 vite build。</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/button/vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vitejs/plugin-vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 增加插件的使用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lib: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      entry: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/index.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;WonderfulElementButton&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fileName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wonderful-element-button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minify: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      external: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 除了 @wonderful-element/shared，未来可能还会依赖其他内部模块，不如用正则表达式将 @wonderful-element 开头的依赖项一起处理掉</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">@wonderful-element</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>完成上述操作后，执行 button 包的构建命令，输出产物。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @wonderful-element/button</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 以下为指令输出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.4.4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">✓</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transformed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dist/style.css</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           0.06</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.08</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dist/wonderful-element-button.mjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.94</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.50</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@wonderful-element/shared&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;shared&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dist/wonderful-element-button.umd.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1.44</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.71</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">✓</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 622ms</span></span></code></pre></div><p>构建成功后，根据产物路径修改 package.json 的入口字段。</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// packages/button/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 省略其他无关配置 ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/wonderful-element-button.umd.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/wonderful-element-button.mjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;require&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/wonderful-element-button.umd.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/wonderful-element-button.mjs&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="整体构建" tabindex="-1">整体构建 <a class="header-anchor" href="#整体构建" aria-label="Permalink to &quot;整体构建&quot;">​</a></h3><p>最后还剩下统一出口 ui 模块，由于只有导出语句，暂不需要 @vitejs/plugin-vue 插件，它的处理方式与 shared 模块类似。</p><p>到此为止，所有组件的构建都完成了，我们可以通过 <a href="https://pnpm.io/zh/filtering#--filter-glob---filter-glob" target="_blank" rel="noreferrer">路径过滤器</a> 选中 packages 目录下所有包进行构建。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./packages/**&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><p>由于 wonderful-element 是组件库的统一出口包，它的 package.json 的 dependencies 字段中声明了所有其他模块，我们也可以用依赖过滤器 ...，构建 ui 以及其所有的依赖项，达到整体构建的效果。不过如果不能确保所有包都在 ui 中再进行一次导出，还是采用前者更佳。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wonderful-element...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><p>执行结果如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Scope:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> workspace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> projects</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">packages/shared</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.4.9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transforming...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ✓</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transformed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rendering</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chunks...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> computing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> size...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/wonderful-element-shared.mjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lodash&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lodash&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/wonderful-element-shared.umd.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.70</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.37</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ✓</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 84ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Done</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 547ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">packages/button</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.4.9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transforming...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ✓</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transformed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rendering</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chunks...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> computing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> size...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/wonderful-element-button.mjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.62</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.35</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@wonderful-element/shared&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;shared&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/wonderful-element-button.umd.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1.11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.56</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ✓</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 626ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Running...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">packages/input</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.4.9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transforming...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Done</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transformed.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rendering</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chunks...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> computing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> size...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/wonderful-element-input.mjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.74</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.40</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@wonderful-element/shared&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;shared&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/wonderful-element-input.umd.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1.25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.61</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ✓</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 653ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Done</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">packages/wonderful-element</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.4.9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> building</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transforming...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lines collapsed]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rendering</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chunks...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> computing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> size...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/wonderful-element.mjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.13</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.08</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@wonderful-element/button&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;button&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@wonderful-element/input&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;input&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> No</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> was</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@wonderful-element/shared&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;output.globals&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> –</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guessing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;shared&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/wonderful-element.umd.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1.39</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gzip:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.45</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Running...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ✓</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> built</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 55ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Done</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 401ms</span></span></code></pre></div><p>观察命令行输出，可以发现整个打包执行顺序(shared -&gt; button &amp; input(并行) -&gt; ui) 是符合依赖树的拓扑排序的(回顾：<a href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html">从零搭建Vue组件库——01.搭建 Monorepo 项目结构</a>)。由于我们用 rollupOptions.external 外部化了依赖，这个特性现在对我们而言无关紧要，但在未来定制完善的打包体系，需要研究全量构建时，拓扑排序的特性就会变得非常关键。</p><p><img src="/blog/assets/build-order.Cz6zjxr1.png" alt="构建顺序"></p><p>我们将组件库的整体构建命令写入根目录下的 package.json，后续我们将通过 pnpm run build:ui 更快捷地执行构建。</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;scripts&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-   &quot;hello&quot;: &quot;echo &#39;hello world&#39;&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+   &quot;build:ui&quot;: &quot;pnpm --filter ./packages/** run build&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="搭建-demo-应用演示组件效果" tabindex="-1">搭建 demo 应用演示组件效果 <a class="header-anchor" href="#搭建-demo-应用演示组件效果" aria-label="Permalink to &quot;搭建 demo 应用演示组件效果&quot;">​</a></h2><p>我们正好借助创建 demo 演示模块来给大家分享如何在 monorepo 项目里建立一个网站应用模块。我们先设置好 demo 模块的目录结构：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">📦wonderful-element</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂demo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂node_modules</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂dist</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂public</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📂main.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜App.vue</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┣</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜tsconfig.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ┃</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ┗</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 📜package.json</span></span></code></pre></div><p>由于 demo 是新添加的模块，需要在 pnpm-workspace.yaml 中补充声明这个工作空间：</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// pnpm-workspace.yaml</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">packages:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - docs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - packages/*</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ - demo</span></span></code></pre></div><p>编辑 demo 模块的 package.json：</p><ul><li>将 wonderful-element 声明为依赖项，导入所有组件；</li><li>script 脚本中添加 vite dev 命令用于运行应用；</li><li>private 设置为 true 避免被当做 npm 包发布。</li><li>完成编辑后，不要忘记执行 pnpm i -w 更新整个项目的依赖。</li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// demo/package.json</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 注意实操时删除注释，package.json 不支持注释</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@wonderful-element/demo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;private&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 启动 vite 开发服务器运行应用</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite dev&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;wonderful-element&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:^&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;devDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Web 应用是以 index.html 作为入口的。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- demo/index.html --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">doctype</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;DEMO&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/src/main.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>vite.config 采取默认配置即可，只需加入 vue 插件。</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// demo/vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vitejs/plugin-vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>之后编辑源码。对于 ts 的报错我们暂不理会，在集成完 TypeScript 后会报错都会消失。</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// demo/src/main.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createApp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> App </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./App.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(App).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- demo/src/App.vue --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Button, Input } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;wonderful-element&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1111&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>最后，执行 demo 模块的 dev 命令，启动应用。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @wonderful-element/demo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输出内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  VITE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.4.4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 534</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ms</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ➜</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Local:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   http://localhost:5173/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ➜</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Network:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expose</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ➜</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  press</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> h</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span></span></code></pre></div><p><img src="/blog/assets/demo.Df_VAX8x.gif" alt="demo"></p><h2 id="结尾与资料汇总" tabindex="-1">结尾与资料汇总 <a class="header-anchor" href="#结尾与资料汇总" aria-label="Permalink to &quot;结尾与资料汇总&quot;">​</a></h2><p>由于篇幅原因，上半篇只完成了 Vite 的集成，TypeScript 的实践部分放在下半篇完成。</p><p>本章涉及到的相关资料汇总如下：</p><p>官网与文档：</p><p><a href="https://code.visualstudio.com/" target="_blank" rel="noreferrer">VSCode</a></p><p><a href="https://www.jetbrains.com/webstorm/" target="_blank" rel="noreferrer">WebStorm</a></p><p><a href="https://pnpm.io/zh/" target="_blank" rel="noreferrer">pnpm</a></p><p><a href="https://cn.vitejs.dev/" target="_blank" rel="noreferrer">Vite</a></p><p><a href="https://cn.vuejs.org/" target="_blank" rel="noreferrer">Vue</a></p><p><a href="https://rollupjs.org/guide/zh/" target="_blank" rel="noreferrer">Rollup</a></p><p><a href="https://www.typescriptlang.org/zh/" target="_blank" rel="noreferrer">TypeScript</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/CSS_preprocessor" target="_blank" rel="noreferrer">CSS 预处理器</a></p><p><a href="https://sass-lang.com/" target="_blank" rel="noreferrer">Sass</a></p><p><a href="https://less.bootcss.com/" target="_blank" rel="noreferrer">Less</a></p><p><a href="https://stylus.bootcss.com/" target="_blank" rel="noreferrer">Stylus</a></p><p><a href="https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue" target="_blank" rel="noreferrer">@vitejs/plugin-vue</a></p></div></div></main><footer class="VPDocFooter" data-v-815a666e data-v-05f74b83><!--[--><!--]--><div class="edit-info" data-v-05f74b83><!----><div class="last-updated" data-v-05f74b83><p class="VPLastUpdated" data-v-05f74b83 data-v-b387f20d>Last updated: <time datetime="2024-11-23T17:27:38.000Z" data-v-b387f20d></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-05f74b83><span class="visually-hidden" id="doc-footer-aria-label" data-v-05f74b83>Pager</span><div class="pager" data-v-05f74b83><a class="VPLink link pager-link prev" href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-01.html" data-v-05f74b83><!--[--><span class="desc" data-v-05f74b83>Previous page</span><span class="title" data-v-05f74b83>从零搭建Vue组件库——01.搭建 Monorepo 项目结构</span><!--]--></a></div><div class="pager" data-v-05f74b83><a class="VPLink link pager-link next" href="/blog/articles/engineering-design/build-vue-component-library-from-scratch-02-part-2.html" data-v-05f74b83><!--[--><span class="desc" data-v-05f74b83>Next page</span><span class="title" data-v-05f74b83>从零搭建Vue组件库——02.在 Monorepo 模式下集成 Vite 和 TypeScript - Part 2</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a4e86ff1 data-v-b26651ba><div class="container" data-v-b26651ba><!----><p class="copyright" data-v-b26651ba>Copyright © 2023-present <a href="https://github.com/liuhq8796">Lucas Liu</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"articles_css_bem-and-atomic-css-methodology.md\":\"NM1H9v3A\",\"articles_css_hides-the-crack-effect-when-the-img-is-empty.md\":\"CueKU_HS\",\"articles_css_index.md\":\"D_vQJ7K1\",\"articles_css_reset-box-sizing-best-practice.md\":\"CsnotZ7m\",\"articles_css_several-methods-of-overlapping-element-positioning.md\":\"K-vrIo-_\",\"articles_css_webp-image-elegant-degradation-scheme.md\":\"BuIxPn45\",\"articles_engineering-design_build-vue-component-library-from-scratch-00.md\":\"BrM_2YGY\",\"articles_engineering-design_build-vue-component-library-from-scratch-01.md\":\"Eu3IDun8\",\"articles_engineering-design_build-vue-component-library-from-scratch-02-part-1.md\":\"CZLBjwPs\",\"articles_engineering-design_build-vue-component-library-from-scratch-02-part-2.md\":\"CMCPBKI3\",\"articles_engineering-design_index.md\":\"DIBiDhgs\",\"articles_git_git-set-view-cancel-proxy.md\":\"CTabi0Va\",\"articles_git_index.md\":\"DE7gWhFp\",\"articles_html_index.md\":\"BdwdrVHI\",\"articles_index.md\":\"VQp883fy\",\"articles_js_basic-utility-functions-in-axios-source-code.md\":\"C9LWylAh\",\"articles_js_convert-a-value-to-an-array.md\":\"D-HQ03xw\",\"articles_js_how-to-elegantly-catch-errors-from-await.md\":\"D9Engexc\",\"articles_js_how-to-ignore-keyboard-events-in-ime.md\":\"DguAM4G0\",\"articles_js_index.md\":\"L3kRlbtp\",\"articles_js_remove-properties-from-an-object.md\":\"B9RCRzmL\",\"articles_js_tiny-queue-data-structure.md\":\"zog56dxV\",\"articles_js_validate-npm-package-name.md\":\"BYnyi_20\",\"articles_linux_change-file-permissions.md\":\"DGLidWa0\",\"articles_linux_common-shortcut-keys.md\":\"fETFVLPH\",\"articles_linux_how-to-shut-down-and-restart-linux-correctly.md\":\"BazZwS38\",\"articles_linux_index.md\":\"CUpWzuc6\",\"articles_linux_linux-file-and-directory-management-exercises.md\":\"CCaG1cTb\",\"articles_linux_linux-file-properties.md\":\"BlZnu4Q5\",\"articles_linux_the-directory-structure-of-linux.md\":\"BQob9zGh\",\"articles_nginx_index.md\":\"CnNfzR6n\",\"articles_nginx_javascript-in-nginx-configuration.md\":\"BnKuxnOM\",\"articles_node_get-all-tags-of-a-remote-git-repository.md\":\"BJUkyk5w\",\"articles_node_index.md\":\"CIyD83b3\",\"articles_node_one-line-of-code-unifies-the-package-manager.md\":\"lPRzYg-7\",\"articles_programming_index.md\":\"C8wQDjWB\",\"articles_programming_object-oriented-00.md\":\"gPy1XOV7\",\"articles_programming_object-oriented-01.md\":\"D5essBWD\",\"articles_programming_object-oriented-02.md\":\"DVtrFvo-\",\"articles_programming_object-oriented-03.md\":\"KnUDEV7B\",\"articles_programming_object-oriented-04.md\":\"D-P0wHUn\",\"articles_programming_object-oriented-05.md\":\"CFi4XNO_\",\"articles_programming_object-oriented-06.md\":\"CIyxGZKR\",\"articles_programming_object-oriented-07.md\":\"8f_iGVEi\",\"articles_programming_programming-principles-00.md\":\"KLnPckBK\",\"articles_programming_programming-principles-01.md\":\"FugA8urb\",\"articles_programming_programming-principles-02.md\":\"DUEOe7N4\",\"articles_programming_programming-principles-03.md\":\"DJctUKrn\",\"articles_programming_programming-principles-04.md\":\"D-W4J13X\",\"articles_programming_programming-principles-05.md\":\"DAm0V-YQ\",\"articles_programming_programming-principles-06.md\":\"XXHWOzoN\",\"articles_programming_programming-principles-07.md\":\"CkP38kjZ\",\"articles_reading_index.md\":\"DVrZYatF\",\"articles_reading_nonviolent-communication.md\":\"B9q1iyyk\",\"articles_ts_basic-utility-functions-in-vue2-source-code.md\":\"BLYXkegx\",\"articles_ts_basic-utility-functions-in-vue3-source-code.md\":\"UlXtjEOu\",\"articles_ts_index.md\":\"Cs5bT27O\",\"articles_ts_type-challenges-challenge-record-simple-level.md\":\"DuYgmukr\",\"articles_vite_index.md\":\"CnjeC44g\",\"articles_vite_interpreting-the-create_vite-source-code.md\":\"CQmfIQ1u\",\"articles_vue_how-this-gets-data-and-methods.md\":\"D16oQKlE\",\"articles_vue_how-to-write-a-reactivity-system.md\":\"BFOoqEjE\",\"articles_vue_index.md\":\"CYHYC8xT\",\"articles_vue_solution-for-component-types-that-cannot-be-recognized.md\":\"CmLpYRcO\",\"articles_vue_vscode-code-snippets-for-vue.md\":\"CHghAZ9n\",\"index.md\":\"C6cp_QTr\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"学海拾贝\",\"titleTemplate\":\"Lucas Liu's 博客\",\"description\":\"Lucas Liu's 博客\",\"base\":\"/blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"全部文章\",\"link\":\"/articles/\"},{\"text\":\"关于我\",\"link\":\"https://liuhq8796.github.io/\",\"target\":\"_blank\"}],\"outlineTitle\":\"页面导航\",\"sidebar\":[{\"text\":\"JS\",\"link\":\"/articles/js/\",\"items\":[{\"text\":\"Axios 源码中的基础工具函数\",\"link\":\"/articles/js/basic-utility-functions-in-axios-source-code\"},{\"text\":\"将一个值转换为一个数组\",\"link\":\"/articles/js/convert-a-value-to-an-array\"},{\"text\":\"如何优雅的捕获 await 的错误\",\"link\":\"/articles/js/how-to-elegantly-catch-errors-from-await\"},{\"text\":\"如何忽略输入法中的键盘事件\",\"link\":\"/articles/js/how-to-ignore-keyboard-events-in-ime\"},{\"text\":\"剔除对象中的属性\",\"link\":\"/articles/js/remove-properties-from-an-object\"},{\"text\":\"微小的队列数据结构\",\"link\":\"/articles/js/tiny-queue-data-structure\"},{\"text\":\"验证 npm 包名是否合法\",\"link\":\"/articles/js/validate-npm-package-name\"}],\"collapsed\":true},{\"text\":\"TS\",\"link\":\"/articles/ts/\",\"items\":[{\"text\":\"Vue2 源码中的基础工具函数\",\"link\":\"/articles/ts/basic-utility-functions-in-vue2-source-code\"},{\"text\":\"Vue3 源码中的基础工具函数\",\"link\":\"/articles/ts/basic-utility-functions-in-vue3-source-code\"},{\"text\":\"type challenges 挑战记录 —— 简单级别\",\"link\":\"/articles/ts/type-challenges-challenge-record-simple-level\"}],\"collapsed\":true},{\"text\":\"HTML\",\"link\":\"/articles/html/\",\"items\":[],\"collapsed\":true},{\"text\":\"CSS\",\"link\":\"/articles/css/\",\"items\":[{\"text\":\"BEM 与 Atomic CSS 方法论\",\"link\":\"/articles/css/bem-and-atomic-css-methodology\"},{\"text\":\"隐藏 img 为空时的图裂效果\",\"link\":\"/articles/css/hides-the-crack-effect-when-the-img-is-empty\"},{\"text\":\"重置 box-sizing 的最佳实践\",\"link\":\"/articles/css/reset-box-sizing-best-practice\"},{\"text\":\"元素重叠定位的几种方法\",\"link\":\"/articles/css/several-methods-of-overlapping-element-positioning\"},{\"text\":\"WebP 图片的优雅降级方案\",\"link\":\"/articles/css/webp-image-elegant-degradation-scheme\"}],\"collapsed\":true},{\"text\":\"Vue\",\"link\":\"/articles/vue/\",\"items\":[{\"text\":\"this 是如何获取 data 和 methods 的\",\"link\":\"/articles/vue/how-this-gets-data-and-methods\"},{\"text\":\"怎样手写一个响应式系统\",\"link\":\"/articles/vue/how-to-write-a-reactivity-system\"},{\"text\":\"无法识别组件类型的解决方案\",\"link\":\"/articles/vue/solution-for-component-types-that-cannot-be-recognized\"},{\"text\":\"适用于 vue 的 VSCode 代码片段\",\"link\":\"/articles/vue/vscode-code-snippets-for-vue\"}],\"collapsed\":true},{\"text\":\"Vite\",\"link\":\"/articles/vite/\",\"items\":[{\"text\":\"解读 create-vite 源码\",\"link\":\"/articles/vite/interpreting-the-create_vite-source-code\"}],\"collapsed\":true},{\"text\":\"Node\",\"link\":\"/articles/node/\",\"items\":[{\"text\":\"获取远程 git 仓库所有 tags\",\"link\":\"/articles/node/get-all-tags-of-a-remote-git-repository\"},{\"text\":\"一行代码统一规范包管理器\",\"link\":\"/articles/node/one-line-of-code-unifies-the-package-manager\"}],\"collapsed\":true},{\"text\":\"Nginx\",\"link\":\"/articles/nginx/\",\"items\":[{\"text\":\"Nginx 配置中的 JavaScript\",\"link\":\"/articles/nginx/javascript-in-nginx-configuration\"}],\"collapsed\":true},{\"text\":\"工程化设计\",\"link\":\"/articles/engineering-design/\",\"items\":[{\"text\":\"从零搭建Vue组件库——00.系列大纲\",\"link\":\"/articles/engineering-design/build-vue-component-library-from-scratch-00\"},{\"text\":\"从零搭建Vue组件库——01.搭建 Monorepo 项目结构\",\"link\":\"/articles/engineering-design/build-vue-component-library-from-scratch-01\"},{\"text\":\"从零搭建Vue组件库——02.在 Monorepo 模式下集成 Vite 和 TypeScript - Part 1\",\"link\":\"/articles/engineering-design/build-vue-component-library-from-scratch-02-part-1\"},{\"text\":\"从零搭建Vue组件库——02.在 Monorepo 模式下集成 Vite 和 TypeScript - Part 2\",\"link\":\"/articles/engineering-design/build-vue-component-library-from-scratch-02-part-2\"}],\"collapsed\":true},{\"text\":\"程序设计\",\"link\":\"/articles/programming/\",\"items\":[{\"text\":\"面向对象——00.什么是面向对象\",\"link\":\"/articles/programming/object-oriented-00\"},{\"text\":\"面向对象——01.四大特性\",\"link\":\"/articles/programming/object-oriented-01\"},{\"text\":\"面向对象——02.面向对象编程中的面向过程\",\"link\":\"/articles/programming/object-oriented-02\"},{\"text\":\"面向对象——03.抽象类 vs 接口\",\"link\":\"/articles/programming/object-oriented-03\"},{\"text\":\"面向对象——04.基于接口而非实现编程\",\"link\":\"/articles/programming/object-oriented-04\"},{\"text\":\"面向对象——05.多用组合少用继承\",\"link\":\"/articles/programming/object-oriented-05\"},{\"text\":\"面向对象——06.贫血模型与充血模型\",\"link\":\"/articles/programming/object-oriented-06\"},{\"text\":\"面向对象——07.类与类之间的交互关系\",\"link\":\"/articles/programming/object-oriented-07\"},{\"text\":\"设计原则——00.单一职责原则\",\"link\":\"/articles/programming/programming-principles-00\"},{\"text\":\"设计原则——01.开闭原则\",\"link\":\"/articles/programming/programming-principles-01\"},{\"text\":\"设计原则——02.里氏替换原则\",\"link\":\"/articles/programming/programming-principles-02\"},{\"text\":\"设计原则——03.接口隔离原则\",\"link\":\"/articles/programming/programming-principles-03\"},{\"text\":\"设计原则——04.控制反转、依赖注入、依赖反转\",\"link\":\"/articles/programming/programming-principles-04\"},{\"text\":\"设计原则——05.KISS 原则与 YAGNI 原则\",\"link\":\"/articles/programming/programming-principles-05\"},{\"text\":\"设计原则——06.DRY 原则\",\"link\":\"/articles/programming/programming-principles-06\"},{\"text\":\"设计原则——07.迪米特法则\",\"link\":\"/articles/programming/programming-principles-07\"}],\"collapsed\":true},{\"text\":\"阅读\",\"link\":\"/articles/reading/\",\"items\":[{\"text\":\"《非暴力沟通》\",\"link\":\"/articles/reading/nonviolent-communication\"}],\"collapsed\":true},{\"text\":\"Linux\",\"link\":\"/articles/linux/\",\"items\":[{\"text\":\"Linux 更改文件的权限\",\"link\":\"/articles/linux/change-file-permissions\"},{\"text\":\"Linux 常用快捷键\",\"link\":\"/articles/linux/common-shortcut-keys\"},{\"text\":\"Linux 如何正确关机、重启\",\"link\":\"/articles/linux/how-to-shut-down-and-restart-linux-correctly\"},{\"text\":\"极客时间《跟阿铭学 Linux》—— 《第 4 章 Linux文件和目录管理》课后习题\",\"link\":\"/articles/linux/linux-file-and-directory-management-exercises\"},{\"text\":\"Linux 文件属性\",\"link\":\"/articles/linux/linux-file-properties\"},{\"text\":\"Linux 的目录结构\",\"link\":\"/articles/linux/the-directory-structure-of-Linux\"}],\"collapsed\":true}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/liuhq8796/blog\"}],\"darkModeSwitchLabel\":\"深色模式\",\"sidebarMenuLabel\":\"目录\",\"returnToTopLabel\":\"回到顶部\",\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"W1OAEVFZMM\",\"apiKey\":\"0f4cf1061ffefe24e4f96b3e82b8b476\",\"indexName\":\"liuhq8796io\"}},\"footer\":{\"copyright\":\"Copyright © 2023-present <a href=\\\"https://github.com/liuhq8796\\\">Lucas Liu</a>\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>