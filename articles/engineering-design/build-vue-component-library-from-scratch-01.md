# ä»é›¶æ­å»ºVueç»„ä»¶åº“â€”â€”01.æ­å»º Monorepo é¡¹ç›®ç»“æ„

> æœ¬æ–‡å‚è€ƒäº†ç¨€åœŸæ˜é‡‘ä¸Šè˜‘è‡ç‹çš„ç³»åˆ—æ–‡ç« â€”â€”[ã€Šä» 0 åˆ° 1 æ­å»º Vue ç»„ä»¶åº“æ¡†æ¶ã€‹](https://juejin.cn/post/7254341178258505788)ï¼Œå¹¶é€šè¿‡ Github Copilot çš„è¾…åŠ©ç¼–å†™åŠŸèƒ½è¿›è¡Œäº†ä¿®æ”¹å’Œè¡¥å……ã€‚

## å¯¼èˆª

ç³»åˆ—å¯¼èˆªï¼š[00.ç³»åˆ—å¤§çº²](/articles/engineering-design/build-vue-component-library-from-scratch-00.md)

ä¸‹ä¸€ç¯‡ï¼š[02.åœ¨ Monorepo æ¨¡å¼ä¸‹é›†æˆ Vite å’Œ TypeScript - Part 1](/articles/engineering-design/build-vue-component-library-from-scratch-02-part-1.md)

## ä¸ºä»€ä¹ˆè¦é‡‡ç”¨ Monorepo é¡¹ç›®ç»“æ„

å¯¹äºç»„ä»¶åº“è¿™ç§å¤æ‚çš„é¡¹ç›®ï¼Œå°†å…¶æ‹†åˆ†æˆå¤šä¸ªå­åŒ…æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚æˆ‘ä»¬å…ˆä¸¾ä¸€ä¸ªæ™®é€šçš„æ¨¡å—åˆ’åˆ†æ€è·¯ï¼š

- `components` åŒ…ï¼Œä½œä¸ºç»„ä»¶åº“çš„ä¸»è¦ä»£ç ï¼Œå®ç°å„ä¸ª UI ç»„ä»¶çš„æ ¸å¿ƒé€»è¾‘ã€‚
- `shared` åŒ…ï¼Œä¸»è¦å­˜æ”¾å„ç§æ‚ä¸ƒæ‚å…«çš„å·¥å…·æ–¹æ³•ã€‚
- `plugins` åŒ…ï¼Œå¯ä»¥å®ç°ç»„ä»¶åº“çš„å‘¨è¾¹æ’ä»¶(æ¯”å¦‚æ„å»ºå·¥å…·æ’ä»¶ç­‰)ã€‚
- `theme` åŒ…ï¼Œå®ç°ç»„ä»¶åº“çš„ä¸»é¢˜æ ·å¼å®šåˆ¶æ–¹æ¡ˆã€‚
- `cli` åŒ…ï¼Œå®ç°ç»„ä»¶åº“æ¨¡æ¿è„šæ‰‹æ¶çš„å‘½ä»¤è¡Œå·¥å…·ã€‚
- `docs` åŒ…ï¼Œç»„ä»¶åº“çš„ç¤ºä¾‹ demo ä¸ä½¿ç”¨æ–‡æ¡£ã€‚
- `playground` åŒ…ï¼Œç»„ä»¶åº“çš„åœ¨çº¿ç¼–è¾‘ã€æ¼”ç¤ºåº”ç”¨ã€‚

è¿™æ˜¯å¾ˆè‡ªç„¶çš„æ€è·¯ï¼Œå°±æ˜¯å°†ç»„ä»¶åº“çš„å„ä¸ªåŠŸèƒ½æ¨¡å—æ‹†åˆ†æˆä¸åŒçš„åŒ…ï¼Œè¿™å°±æ˜¯ä¼ ç»Ÿçš„ `MultiRepo` é¡¹ç›®ç»“æ„ã€‚å…¶ä¸­ï¼Œæ¯ä¸€ä¸ªå­åŒ…éƒ½æœ‰å…¶ç‹¬ç«‹çš„ç‰ˆæœ¬å·ã€é…ç½®å’Œå‘å¸ƒæµç¨‹ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯æ¯ä¸ªå­åŒ…éƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹æµ‹è¯•ã€ç‹¬ç«‹å‘å¸ƒï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š

docs@1.0.0 --> components@1.0.0 --> shared@1.0.0

å‡å¦‚æˆ‘æ›´æ–°äº† `shared` åŒ…ä¸­çš„å·¥å…·ä»£ç ï¼Œå½“ç„¶å¸Œæœ› `components` åŒ…ä¸­çš„ä»£ç ä¹Ÿèƒ½å¤Ÿä½¿ç”¨åˆ°æœ€æ–°çš„å·¥å…·ä»£ç ï¼Œå¹¶ä¸”åé¦ˆåˆ° `docs` åŒ…ä¸­çš„æ–‡æ¡£ä¸­ï¼Œä½†æ˜¯ç”±äº `components` åŒ…å’Œ `docs` åŒ…éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦æ‰‹åŠ¨æ›´æ–° `components` åŒ…çš„ä¾èµ–ï¼Œç„¶åå†æ‰‹åŠ¨æ›´æ–° `docs` åŒ…çš„ä¾èµ–ï¼Œè¿™æ ·çš„æ“ä½œæ˜¯éå¸¸ç¹ççš„ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚æ›´éš¾å—çš„æ˜¯ï¼Œå‡å¦‚å‘ç°æˆ‘ä»¬åœ¨ `shared` åŒ…ä¸­çš„æ›´æ–°æœ‰é—®é¢˜ï¼Œå†æ¬¡ä¿®æ”¹ä»è¦èµ°ä¸€éä¸Šè¿°æµç¨‹ï¼Œè¿™æ ·çš„å¼€å‘ä½“éªŒæ˜¯éå¸¸ç³Ÿç³•çš„ã€‚

<style>
.text-green-400 {
  color: rgb(34 197 94);
}
</style>

docs@1.0.<span class="text-green-400">1</span> --> components@1.0.<span class="text-green-400">1</span> --> shared@1.0.<span class="text-green-400">1</span>

å¦ä¸€æ–¹é¢ï¼Œè™½ç„¶å®ƒä»¬æ˜¯ä¸åŒçš„åŒ…ï¼Œä½†å®ƒä»¬çš„é…ç½®ã€æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒç­‰æµç¨‹æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å®ƒä»¬çš„é…ç½®æ–‡ä»¶å¾ˆå¤šéƒ½æ˜¯é‡å¤çš„ï¼Œä¸€æ—¦æœ‰é…ç½®æ–‡ä»¶éœ€è¦ä¿®æ”¹ï¼Œå°±éœ€è¦ä¿®æ”¹å¤šä¸ªåŒ…ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·çš„æ“ä½œä¹Ÿæ˜¯éå¸¸ç¹ççš„ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´å¥½çš„é¡¹ç›®ç»“æ„ï¼Œè¿™å°±æ˜¯ `Monorepo` é¡¹ç›®ç»“æ„ï¼Œå®ƒçš„æ€è·¯æ˜¯å°†æ‰€æœ‰çš„å­åŒ…éƒ½æ”¾åœ¨ä¸€ä¸ªå¤§çš„ä»“åº“ä¸­ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ï¼š

- å„ä¸ªæ¨¡å—ä¹‹é—´å¯ä»¥å¿«é€Ÿçš„æœç”¨ä»£ç ï¼Œçœå»äº†åœ¨ä¸åŒé¡¹ç›®ä¸­å®‰è£…ä¾èµ–çš„æ­¥éª¤ã€‚
- ä»»æ„ä¸€ä¸ªæ¨¡å—å‘ç”Ÿä¿®æ”¹ï¼Œå¦ä¸€ä¸ªæ¨¡å—èƒ½å¤Ÿç«‹å³åé¦ˆè€Œä¸ç”¨èµ°ç¹ççš„å‘å¸ƒå’Œä¾èµ–æ›´æ–°æµç¨‹ã€‚
- å„ä¸ªæ¨¡å—ä¹‹é—´ä¹Ÿèƒ½å¤Ÿå……åˆ†å¤ç”¨é…ç½®ã€CI æµç¨‹çš„è„šæœ¬ï¼Œæ¯”å¦‚ `.babelrc`ã€`vite.config.js` ç­‰ã€‚
- å„ä¸ªåŒ…çš„ç‰ˆæœ¬å’Œäº’ç›¸ä¹‹é—´çš„ä¾èµ–å…³ç³»å¾—åˆ°é›†ä¸­ç®¡ç†ã€‚

è¯¦ç»†çš„å¯¹æ¯”å¯ä»¥å‚è€ƒä¸‹é¢è¿™å‡ ç¯‡æ–‡ç« ï¼š

- [å¸¦ä½ äº†è§£æ›´å…¨é¢çš„ Monorepo - ä¼˜åŠ£ã€è¸©å‘ã€é€‰å‹](https://juejin.cn/post/7215886869199896637)
- [ä¸ºä»€ä¹ˆè¶Šæ¥è¶Šå¤šçš„é¡¹ç›®é€‰æ‹© Monorepoï¼Ÿ](https://juejin.cn/post/7207743145999368229)

å†ä¸¾å‡ ä¸ªæ¡ˆä¾‹é¡¹ç›®ï¼š

- [Vue 3](https://github.com/vuejs/core/tree/main/packages)
- [Element Plus](https://github.com/element-plus/element-plus/tree/dev/packages)
- [UnoCSS](https://github.com/unocss/unocss/tree/main/packages)

## åŒ…ç®¡ç†åŸºç¡€

æœ¬ç« èŠ‚åªä¼šç®€ç•¥åœ°ä»‹ç» `package.json` ä¸­çš„éƒ¨åˆ†çš„å­—æ®µï¼Œå¦‚æœæƒ³è¦è¯¦ç»†äº†è§£ `package.json` çš„å­—æ®µï¼Œå¯ä»¥å‚è€ƒä¸‹é¢è¿™äº›æ–‡ç« ï¼š

[å®˜æ–¹æ–‡æ¡£ï¼špackage.json](https://link.juejin.cn/?target=https%3A%2F%2Fdocs.npmjs.com%2Fcli%2Fv9%2Fconfiguring-npm%2Fpackage-json%23homepage)

[ä½ çœŸçš„äº†è§£package.jsonå—ï¼Ÿ](https://juejin.cn/post/6987179395714646024)

[å…³äºå‰ç«¯å¤§ç®¡å®¶ package.jsonï¼Œä½ çŸ¥é“å¤šå°‘ï¼Ÿ](https://juejin.cn/post/7023539063424548872)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥ä¸€ä¸€ä»‹ç»è¿™äº›å­—æ®µã€‚

### æ ‡è¯†ä¿¡æ¯

- **`name`** å­—æ®µæ˜¯åŒ…çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå®ƒçš„æ ¼å¼æ˜¯`@scope/name`ï¼Œå…¶ä¸­ `scope` æ˜¯åŒ…çš„ä½œç”¨åŸŸï¼Œ`name` æ˜¯åŒ…çš„åç§°ï¼Œæ¯”å¦‚ `@vue/shared`ã€‚`name` å­—æ®µæ˜¯å¿…å¡«å­—æ®µï¼Œå¦åˆ™ `npm` ä¼šæŠ¥é”™ã€‚

  åŒ…çš„å‘½åä¹Ÿæ˜¯æœ‰ä¸€äº›è§„èŒƒçš„ï¼Œä¹Ÿæœ‰ç›¸åº”çš„åŒ…æ¥æ£€æŸ¥åŒ…çš„å‘½åæ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œæ¯”å¦‚ [validate-npm-package-name](https://www.npmjs.com/package/validate-npm-package-name)ï¼Œå…³äºè¿™ä¸ªåŒ…çš„æºç è§£æçœ‹ä¸€å‚è€ƒæ–‡ç« ï¼š[éªŒè¯ npm åŒ…åæ˜¯å¦åˆæ³•](/articles/js/validate-npm-package-name.md)ã€‚

- **`version`** å­—æ®µæ˜¯åŒ…çš„ç‰ˆæœ¬å·ï¼Œå®ƒçš„æ ¼å¼æ˜¯`x.y.z`ï¼Œå…¶ä¸­ `x` æ˜¯ä¸»ç‰ˆæœ¬å·ï¼Œ`y` æ˜¯æ¬¡ç‰ˆæœ¬å·ï¼Œ`z` æ˜¯ä¿®è®¢ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚ `1.0.0`ã€‚`version` å­—æ®µæ˜¯å¿…å¡«å­—æ®µï¼Œå¦åˆ™ `npm` ä¼šæŠ¥é”™ã€‚

  å¦‚æœæƒ³è¦è¿›ä¸€æ­¥äº†è§£ `semver` çš„è§„èŒƒï¼Œå¯ä»¥å‚è€ƒä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š

  - [è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0](https://semver.org/lang/zh-CN/)

  - [npm çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ](https://docs.npmjs.com/about-semantic-versioning)

### åŸºæœ¬ä¿¡æ¯

**åŸºæœ¬ä¿¡æ¯ä¸»è¦ç”± `npm` è¯»å–**ï¼Œæœªæ­£ç¡®è®¾ç½®ä¸ä¼šå½±å“åŒ…çš„ä½¿ç”¨ï¼Œä½†ä¼šå¯¼è‡´è¯¥åŒ…åœ¨ `npm.js` ä¸Šç¼ºå¤±ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œä¸èƒ½ç»™ç”¨æˆ·æä¾›æ­£ç¡®çš„å¼•å¯¼ã€‚

![npm.js ä¸Šçš„åŸºæœ¬ä¿¡æ¯](./images/build-vue-component-library-from-scratch-01/base-info.png)

è¿™é‡Œä»¥ [Vue çš„åŸºæœ¬ä¿¡æ¯](https://github.com/vuejs/core/blob/main/packages/vue/package.json)ä¸¾ä¸ªä¾‹å­ï¼š

```json
{
  "name": "vue",
  "version": "3.3.4",
  // ä¸€å¥è¯ç®€ä»‹
  "description": "The progressive JavaScript framework for building modern web UI.",
  // æºç ä»“åº“
  "repository": {
    "type": "git",
    "url": "git+https://github.com/vuejs/core.git"
  },
  // å…³é”®å­—
  "keywords": ["vue"],
  // ä½œè€…
  "author": "Evan You",
  // è®¸å¯è¯
  "license": "MIT",
  // bug åé¦ˆåœ°å€
  "bugs": {
    "url": "https://github.com/vuejs/core/issues"
  },
  // é¡¹ç›®ä¸»é¡µ
  "homepage": "https://github.com/vuejs/core/tree/main/packages/vue#readme"
}
```

### å…¥å£ä¿¡æ¯

å…¥å£ä¿¡æ¯ä¸»è¦è¢« Node.jsã€å„è·¯æ‰“åŒ…æ„å»ºå·¥å…·è¯»å–ï¼Œä»è€Œæ­£ç¡®çš„å¼•å…¥åŒ…çš„ä»£ç ã€‚

å…¥å£æ–‡ä»¶çš„åŠ è½½æœºåˆ¶æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæœ¬æ–‡åªè®²åˆ°è¶³å¤Ÿæ­å»ºç»„ä»¶åº“çš„ç¨‹åº¦ï¼Œå°±ä¸å±•å¼€è®²äº†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‚è€ƒä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š

- [package.json å¯¼å…¥æ¨¡å—å…¥å£æ–‡ä»¶ä¼˜å…ˆçº§è¯¦è§£ main, browser, module, exports](https://juejin.cn/post/7225072417532739644)

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦å…·æœ‰ä¸€å®šçš„æ¨¡å—åŒ–è§„èŒƒçŸ¥è¯†ã€‚ä»ç›®å‰çš„æƒ…å†µæ¥çœ‹ï¼Œè‡³å°‘è¦äº†è§£ cjsã€esm è¿™ä¸¤ç§ç°ä»£åŒ–è§„èŒƒï¼Œè¿™é‡ŒåŒæ ·ç»™å¤§å®¶æ¨èä¸€äº›æ–‡ç« ï¼š

- [é˜®ä¸€å³° â€”â€” Module çš„åŠ è½½å®ç°](https://es6.ruanyifeng.com/#docs/module-loader)
- [ESMå’ŒCJSæ¨¡å—æ‚è°ˆ](https://juejin.cn/post/7048276970768957477)ã€‚

åç»­è®²åˆ°æ‰“åŒ…å’Œç”Ÿæˆå¤šåœºæ™¯äº§ç‰©æ—¶ï¼Œåœ¨åšè¯¦ç»†çš„ä»‹ç»ã€‚

è¿™é‡Œåˆ—ä¸¾å‡ ä¸ªéœ€è¦è¢«å…³æ³¨çš„å­—æ®µï¼šmainã€moduleã€typesã€exportsï¼Œè¿™å‡ ä¸ªå­—æ®µçš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š

1. main å’Œ exports["."].require å­—æ®µç”¨äºè®¾ç½®ä»¥ require() æ–¹å¼å¼•å…¥åŒ…çš„å…¥å£æ–‡ä»¶ï¼ˆcjs è§„èŒƒï¼‰ã€‚

   ```json
   // å…¥å£å®šä¹‰
   {
     "name": "my-module",
     "main": "index.js",
     "exports": {
       ".": {
         "require": "index.js"
       }
       // ...
     }
   }
   ```

   ```js
   // åœ¨ä»£ç ä¸­å¼•ç”¨
   const app = require('my-module') // å®é™…è·¯å¾„ node_modules/my-module/index.js
   ```

2. module å’Œ exports["."].import å­—æ®µç”¨äºè®¾ç½®ä»¥ import æ–¹å¼å¼•å…¥åŒ…çš„å…¥å£æ–‡ä»¶ï¼ˆesm è§„èŒƒï¼‰ã€‚

   ```json
   // å…¥å£å®šä¹‰
   {
     "name": "my-module",
     "main": "index.js",
     "module": "index.js",
     "exports": {
       ".": {
         "require": "index.js",
         "import": "index.js"
       }
       // ...
     }
   }
   ```

   ```js
   // åœ¨ä»£ç ä¸­å¼•ç”¨
   import app from 'my-module' // å®é™…è·¯å¾„ node_modules/my-module/index.js
   ```

3. types å’Œ exports["."].types å­—æ®µç”¨äºè®¾ç½® d.ts ç±»å‹å£°æ˜çš„åŠ è½½å…¥å£(TypeScript ä¸“å±)ã€‚

   ```json
   // å…¥å£å®šä¹‰
   {
     "name": "my-module",
     "main": "index.js",
     "module": "index.js",
     "types": "index.d.ts",
     "exports": {
       ".": {
         "require": "index.js",
         "import": "index.js",
         "types": "index.d.ts"
       }
       // ...
     }
   }
   ```

4. exports å¯ä»¥æš´éœ²æ›´å¤šçš„å­è·¯å¾„ï¼Œè€Œ mainã€moduleã€types åªèƒ½å®šä¹‰ä¸»å‡ºå£ã€‚

   ```json
   // å…¥å£å®šä¹‰
   {
     "name": "my-module",
     "main": "index.js",
     "exports": {
       ".": {
         "require": "index.js"
       },
       "./submodule.js": {
         "require": "./submodule.js"
       },
       "./locale/*.js": {
         "require": "./locale/*.js"
       },
       "./plugins/*.js": {
         "require": "./dist/plugins/*.js"
       }
       // ...
     }
   }
   ```

   æœ€åï¼Œå½“ exports å’Œå¦å¤–ä¸‰ä¸ªå…¥å£å­—æ®µå‡ºç°é‡å¤å®šä¹‰æ—¶ï¼Œä¼šæœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚

### ä¾èµ–ä¿¡æ¯

ä¾èµ–ä¿¡æ¯çš„è¯»å–æ–¹åªæœ‰åŒ…ç®¡ç†å™¨ï¼Œç”¨äºå®‰è£…åŒ…æ—¶çš„ä¾èµ–è§£æã€‚

#### ç‰ˆæœ¬çº¦æŸ

ä¾èµ–ä¿¡æ¯çš„æ¥å£æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„é”®(key)æ˜¯åŒ…çš„åç§°ï¼Œå€¼(value)æ˜¯åŒ…çš„ç‰ˆæœ¬çº¦æŸï¼Œä¾‹å¦‚ï¼š

```json
{
  "dependencies": {
    "lodash": "^4.17.21"
  },
  "devDependencies": {
    "vite": "~4.2.0"
  },
  "peerDependencies": {
    "vue": "^3.2.0"
  }
}
```

ç‰ˆæœ¬çº¦æŸé™åˆ¶äº†åŒ…ç®¡ç†å™¨ä¸ºé¡¹ç›®å®‰è£…ä¾èµ–æ—¶å¯é€‰çš„ç‰ˆæœ¬èŒƒå›´ï¼š

- ^ çš„å«ä¹‰æ˜¯å®‰è£…æœ€æ–°çš„ minor ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯å®‰è£…æœ€æ–°çš„æ¬¡ç‰ˆæœ¬ï¼Œä¸»ç‰ˆæœ¬å·ä¿æŒä¸å˜ã€‚ä¾‹å¦‚ ^1.2.0 çš„çº¦æŸä¸‹ï¼Œä¼šä¸ºé¡¹ç›®å®‰è£…æœ€æ–°çš„ minor ç‰ˆæœ¬ 1.X.Yï¼Œä½†ä¸ä¼šå®‰è£…ä¸‹ä¸€ä¸ª major ç‰ˆæœ¬ 2.0.0ã€‚
- ~ çš„å«ä¹‰æ˜¯å®‰è£…æœ€æ–°çš„ patch ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯å®‰è£…æœ€æ–°çš„è¡¥ä¸ç‰ˆæœ¬ï¼Œæ¬¡ç‰ˆæœ¬å·ä¿æŒä¸å˜ã€‚ä¾‹å¦‚ ~1.2.0 çš„çº¦æŸä¸‹ï¼Œä¼šä¸ºé¡¹ç›®å®‰è£…æœ€æ–°çš„ patch ç‰ˆæœ¬ 1.2.Xï¼Œä½†ä¸ä¼šå®‰è£…ä¸‹ä¸€ä¸ª minor ç‰ˆæœ¬ 1.3.0ã€‚
- å¦‚æœç‰ˆæœ¬å·å‰é¢æ²¡æœ‰ä»»ä½•æ ‡è¯†ç¬¦ï¼Œè¡¨ç¤ºå›ºå®šç‰ˆæœ¬å·ï¼Œæ— è®ºå¦‚ä½•éƒ½åªå®‰è£…è¿™ä¸ªå›ºå®šç‰ˆæœ¬ã€‚

å…³äºç‰ˆæœ¬çº¦æŸçš„è¿›é˜¶é˜…è¯»ï¼š

- [å·¥ç¨‹çš„ package.json ä¸­çš„ ^~ è¯¥ä¿ç•™å—ï¼Ÿ](https://juejin.cn/post/7244818841502826553)

#### ä¾èµ–åˆ†ç±»

<!-- prettier-ignore-start -->
|ä¾èµ–ç±»å‹|é¡¹ç›®ä¸­|ä¾èµ–ä¸­|ç”¨é€”|
|---|---|---|---|
|dependencies|ä¼šè¢«å®‰è£…|ä¼šè¢«å®‰è£…|é¡¹ç›®è¿è¡Œæ—¶ä¾èµ–|
|devDependencies|ä¼šè¢«å®‰è£…|ä¸ä¼šè¢«å®‰è£…|é¡¹ç›®åœ¨å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦çš„ä¾èµ–ã€‚ä¸€èˆ¬æ„å»ºå·¥å…·ã€æµ‹è¯•æ¡†æ¶ã€ä»£ç è§„èŒƒå·¥å…·éƒ½ä¼šè¢«ä½œä¸ºå¼€å‘ä¾èµ–|
|peerDependencies|ä¸ä¼šè¢«å®‰è£…|ä¸ä¼šè¢«å®‰è£…ã€‚ä½†æ˜¯è‹¥å…¶ä¸­å£°æ˜çš„ä¾èµ–æ²¡æœ‰è¢«é¡¹ç›®æœ¬èº«å®‰è£…ï¼Œæˆ–è€…å®‰è£…ç‰ˆæœ¬ä¸åŒ¹é…æ—¶ï¼Œä¼šç”Ÿæˆè­¦å‘Šä¿¡æ¯æç¤ºç”¨æˆ·|å®šä¹‰ä¾èµ–è¿è¡Œæ—¶éœ€è¦çš„å…¶ä»–ä¾èµ–ï¼Œå¸¸ç”¨äºè¡¨ç¤ºæ’ä»¶å’Œä¸»æ¡†æ¶çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼š@vitejs/plugin-vue çš„ peerDependencies ä¸­å°±å£°æ˜äº†ä¸»æ¡†æ¶ vite å’Œ vue|
<!-- prettier-ignore-end -->

- è¡¨æ ¼ä¸­çš„ é¡¹ç›®ä¸­ ç†è§£ä¸ºä¾èµ–ä¿¡æ¯è¢«å®šä¹‰åœ¨æˆ‘ä»¬æ­£åœ¨å¼€å‘çš„æ¨¡å—ï¼Œå¯¹åº”æ ¹ç›®å½•ä¸‹çš„ package.json ä¸­ï¼›
- ä¾èµ–ä¸­ ç†è§£ä¸ºé¡¹ç›®å·²ç»å‘å¸ƒï¼Œè¢«å…¶ä»–é¡¹ç›®ç”¨ä½œä¾èµ–ï¼Œä¾èµ–ä¿¡æ¯è¢«å®šä¹‰åœ¨å…¶ä»–é¡¹ç›® node_modules å†…çš„ä¾èµ–åŒ…ä¸­(å³ä¾èµ–çš„ä¾èµ–)ï¼Œå¯¹åº” node_modules/${packageName}/package.jsonã€‚

å¦‚æœæƒ³è¿›ä¸€æ­¥äº†è§£ä¾èµ–çš„åŒºåˆ«ä»¥åŠâ€œå¹½çµä¾èµ–â€çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢è¿™äº›æ–‡ç« ï¼š

- [æ–°ä¸€ä»£åŒ…ç®¡ç†å·¥å…· pnpm ä½¿ç”¨å¿ƒå¾—](https://juejin.cn/post/7124613898115743757)
- [ä¹±èŠ±è¿·äººçœ¼ - ä¸€æ–‡å½»åº•çœ‹æ‡‚ package.json ä¸­çš„å„ç§ dependencies](https://juejin.cn/post/7137228673156907044)

### å‘å¸ƒä¿¡æ¯

å‘å¸ƒä¿¡æ¯çš„è¯»å–æ–¹åªæœ‰åŒ…ç®¡ç†å™¨ã€‚

#### files

files æŒ‡å®šäº†å‘å¸ƒä¸º npm åŒ…æ—¶ï¼Œå“ªäº›æ–‡ä»¶æˆ–ç›®å½•éœ€è¦è¢«æäº¤åˆ° npm æœåŠ¡å™¨ä¸­ã€‚

```json
{
  "files": ["dist", "LICENSE", "README.md"]
}
```

#### private

private ç”¨äºæŒ‡å®šé¡¹ç›®æ˜¯å¦ä¸ºç§æœ‰åŒ…ã€‚å½“æˆ‘ä»¬çš„é¡¹ç›®ä¸æƒ³è¢«æ„å¤–å‘å¸ƒåˆ°å…¬å…± npm ä»“åº“æ—¶ï¼Œå°±è®¾ç½® private: trueã€‚

```json
{
  "private": true
}
```

#### publishConfig

publishConfig ç”¨äºæŒ‡å®šå‘å¸ƒæ—¶çš„é…ç½®ï¼Œå½“æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦å‘å¸ƒåˆ°ç§æœ‰çš„ npm ä»“åº“æ—¶(æ¯”å¦‚å…¬å¸å†…ç½‘çš„ä»“åº“)ï¼Œéœ€è¦è®¾ç½® publishConfig å¯¹è±¡ã€‚

```json
{
  "publishConfig": {
    "registry": "https://mynpm.com"
  }
}
```

### è„šæœ¬ä¿¡æ¯

è„šæœ¬ä¿¡æ¯çš„è¯»å–æ–¹åªæœ‰åŒ…ç®¡ç†å™¨ï¼Œè¿™æ˜¯åŒ…ç®¡ç†å™¨ç»™æˆ‘ä»¬æä¾›çš„ä¸€é¡¹ç¦åˆ©åŠŸèƒ½ï¼Œå…è®¸æˆ‘ä»¬ç»™å¤æ‚çš„å‘½ä»¤èµ‹äºˆä¸€ä¸ªç®€å•çš„åˆ«åï¼Œç”¨äºæ‰§è¡Œé¡¹ç›®ä¸­çš„è„šæœ¬ã€‚

```json
{
  "scripts": {
    "show": "echo 'Hello World!'",
    "build": "vite build",
    "dev": "vite",
    "lint": "eslint --ext .js,.vue src",
    "test": "jest"
  }
}
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¿è¡Œ npm run show å°±å¯ä»¥æ‰§è¡Œæ‰“å° Hello World çš„å‘½ä»¤ã€‚

è¿è¡Œ npm run dev å°±å¯ä»¥è°ƒç”¨ vite çš„å‘½ä»¤è¡Œç¨‹åºï¼Œå¯åŠ¨ vite å¼€å‘æœåŠ¡å™¨ã€‚ç„¶è€Œç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ vite å‘½ä»¤æ˜¯ä¼šæŠ¥é”™çš„ï¼Œè¿™æ˜¯å› ä¸ºåŒ…ç®¡ç†å™¨ä¼šå°†é¡¹ç›®ä¸­æ‰€æœ‰ç›¸å…³çš„å¯æ‰§è¡Œå‘½ä»¤äºŒè¿›åˆ¶æ–‡ä»¶æ”¾å…¥ node_modules/.bin ä¸­ï¼Œè¿™ä¸ªç›®å½•ä¼šåœ¨è¿è¡Œæ—¶è¢«åŠ å…¥åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ PATHã€‚å­˜æ”¾å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„è¡Œä¸ºå¯ä»¥é€šè¿‡é…ç½® bin å­—æ®µæ¥è‡ªå®šä¹‰ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¸åšå±•å¼€è®²ã€‚

## pnpm åŒ…ç®¡ç†

### é€‰å‹ç†ç”±

> pnpm - é€Ÿåº¦å¿«ã€èŠ‚çœç£ç›˜ç©ºé—´çš„è½¯ä»¶åŒ…ç®¡ç†å™¨

monorepo çš„å•ä»“åˆ†æ¨¡å—çš„è¦æ±‚ï¼Œä½¿å¾—ä»“åº“å†…çš„æ¨¡å—ä¸ä»…è¦å¤„ç†ä¸å¤–éƒ¨æ¨¡å—çš„å…³ç³»ï¼Œè¿˜è¦å¤„ç†å†…éƒ¨ä¹‹é—´ç›¸äº’çš„ä¾èµ–å…³ç³»ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ä¸ªå¼ºå¤§çš„åŒ…ç®¡ç†å·¥å…·å¸®åŠ©å¤„ç†è¿™äº›ä»»åŠ¡ã€‚

ç›®å‰å‰ç«¯åŒ…ç®¡ç†çš„æ ¹åŸºæ˜¯ npmï¼Œåœ¨å…¶åŸºç¡€ä¸Šè¡ç”Ÿå‡ºäº† yarnã€pnpmã€‚åœ¨ 2022 å¹´ä»¥åï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ pnpm æ¥ç®¡ç†é¡¹ç›®ä¾èµ–ã€‚pnpm è¦†ç›–äº† npmã€yarn çš„å¤§éƒ¨åˆ†èƒ½åŠ›ï¼Œä¸”å¤šä¸ªç»´åº¦çš„ä½“éªŒéƒ½æœ‰å¤§å¹…åº¦æå‡ã€‚

å®ƒå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- é€Ÿåº¦å¿«ï¼šå¤šæ•°åœºæ™¯ä¸‹ï¼Œå®‰è£…é€Ÿåº¦æ˜¯ npm/yarn çš„ 2 - 3 å€ã€‚
- åŸºäºå†…å®¹å¯»å€ï¼šç¡¬é“¾æ¥èŠ‚çº¦ç£ç›˜ç©ºé—´ï¼Œä¸ä¼šé‡å¤å®‰è£…åŒä¸€ä¸ªåŒ…ï¼Œå¯¹äºåŒä¸€ä¸ªåŒ…çš„ä¸åŒç‰ˆæœ¬é‡‡å–å¢é‡å†™å…¥æ–°æ–‡ä»¶çš„ç­–ç•¥ã€‚
- ä¾èµ–è®¿é—®å®‰å…¨æ€§å¼ºï¼šä¼˜åŒ–äº† node_modules çš„æ‰å¹³ç»“æ„ï¼Œæä¾›äº†é™åˆ¶ä¾èµ–çš„éæ³•è®¿é—®(å¹½çµä¾èµ–)çš„æ‰‹æ®µã€‚
- æ”¯æŒ monorepoï¼šè‡ªèº«èƒ½åŠ›å°±å¯¹ monorepo å·¥ç¨‹æ¨¡å¼æä¾›äº†æœ‰åŠ›çš„æ”¯æŒã€‚åœ¨è½»é‡åœºæ™¯ä¸‹ï¼Œæ— éœ€é›†æˆ lernaã€Turborepo ç­‰å·¥å…·ã€‚

å…³äº pnpm çš„è¿›é˜¶é˜…è¯»ï¼š[å…³äºç°ä»£åŒ…ç®¡ç†å™¨çš„æ·±åº¦æ€è€ƒâ€”â€”ä¸ºä»€ä¹ˆç°åœ¨æˆ‘æ›´æ¨è pnpm è€Œä¸æ˜¯ npm/yarn?](https://juejin.cn/post/6932046455733485575)

### workspace æ¨¡å¼

pnpm æ”¯æŒ monorepo æ¨¡å¼çš„å·¥ä½œæœºåˆ¶å«åš [workspace(å·¥ä½œç©ºé—´)](https://pnpm.io/zh/workspaces)ã€‚

å®ƒè¦æ±‚åœ¨ä»£ç ä»“çš„æ ¹ç›®å½•ä¸‹å­˜æœ‰ pnpm-workspace.yaml æ–‡ä»¶æŒ‡å®šå“ªäº›ç›®å½•ä½œä¸ºç‹¬ç«‹çš„å·¥ä½œç©ºé—´ï¼Œè¿™ä¸ªå·¥ä½œç©ºé—´å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå­æ¨¡å—æˆ–è€… npm åŒ…ã€‚

ä¾‹å¦‚ä»¥ä¸‹çš„ pnpm-workspace.yaml æ–‡ä»¶å®šä¹‰ï¼ša ç›®å½•ã€b ç›®å½•ã€c ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•ï¼Œéƒ½ä¼šå„è‡ªè¢«è§†ä¸ºç‹¬ç«‹çš„æ¨¡å—ã€‚

```yaml
packages:
  - a
  - b
  - c/*
```

```bash
ğŸ“¦my-project
 â”£ ğŸ“‚a
 â”ƒ â”— ğŸ“œpackage.json
 â”£ ğŸ“‚b
 â”ƒ â”— ğŸ“œpackage.json
 â”£ ğŸ“‚c
 â”ƒ â”£ ğŸ“‚c-1
 â”ƒ â”ƒ â”— ğŸ“œpackage.json
 â”ƒ â”£ ğŸ“‚c-2
 â”ƒ â”ƒ â”— ğŸ“œpackage.json
 â”ƒ â”— ğŸ“‚c-3
 â”ƒ   â”— ğŸ“œpackage.json
 â”£ ğŸ“œpackage.json
 â”£ ğŸ“œpnpm-workspace.yaml
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œpnpm å¹¶ä¸æ˜¯é€šè¿‡ç›®å½•åç§°ï¼Œè€Œæ˜¯é€šè¿‡ç›®å½•ä¸‹ package.json æ–‡ä»¶çš„ name å­—æ®µæ¥è¯†åˆ«ä»“åº“å†…çš„åŒ…ä¸æ¨¡å—çš„ã€‚

### ä¸­æ¢ç®¡ç†æ“ä½œ

åœ¨ workspace æ¨¡å¼ä¸‹ï¼Œä»£ç ä»“æ ¹ç›®å½•é€šå¸¸ä¸ä¼šä½œä¸ºä¸€ä¸ªå­æ¨¡å—æˆ–è€… npm åŒ…ï¼Œè€Œæ˜¯**ä¸»è¦ä½œä¸ºä¸€ä¸ªç®¡ç†ä¸­æ¢ï¼Œæ‰§è¡Œä¸€äº›å…¨å±€æ“ä½œï¼Œå®‰è£…ä¸€äº›å…±æœ‰çš„ä¾èµ–ã€‚**

ä¸‹é¢ä»‹ç»ä¸€äº›å¸¸ç”¨çš„ä¸­æ¢ç®¡ç†æ“ä½œã€‚

- åˆ›å»ºä¸€ä¸ª package.json æ–‡ä»¶ã€‚

  ```bash
  pnpm init
  ```

- è®¾ç½®ç”¨æˆ·çš„å…¨å±€ .npmrc é…ç½®

  ```bash
  pnpm config set <key> <value>
  ```

- æ ¹æ®å½“å‰ç›®å½• package.json ä¸­çš„ä¾èµ–å£°æ˜å®‰è£…å…¨éƒ¨ä¾èµ–ï¼Œåœ¨ workspace æ¨¡å¼ä¸‹ä¼šä¸€å¹¶å¤„ç†æ‰€æœ‰å­æ¨¡å—çš„ä¾èµ–å®‰è£…ã€‚

  ```bash
  pnpm install
  ```

- å®‰è£…é¡¹ç›®å…¬å…±å¼€å‘ä¾èµ–ï¼Œå£°æ˜åœ¨æ ¹ç›®å½•çš„ package.json - devDependencies ä¸­ã€‚-w é€‰é¡¹ä»£è¡¨åœ¨ monorepo æ¨¡å¼ä¸‹çš„æ ¹ç›®å½•è¿›è¡Œæ“ä½œã€‚
- æ¯ä¸ªå­åŒ…éƒ½èƒ½è®¿é—®æ ¹ç›®å½•çš„ä¾èµ–ï¼Œé€‚åˆæŠŠ TypeScriptã€Viteã€eslint ç­‰å…¬å…±å¼€å‘ä¾èµ–è£…åœ¨è¿™é‡Œã€‚

  ```bash
  pnpm install -wD xxx
  ```

- å¸è½½å…¬å…±ä¾èµ–ï¼Œåœ¨æ ¹ç›®å½•çš„ package.json - devDependencies ä¸­åˆ å»å¯¹åº”å£°æ˜

  ```bash
  pnpm uninstall -w xxx
  ```

- æ‰§è¡Œæ ¹ç›®å½•çš„ package.json ä¸­çš„è„šæœ¬

  ```bash
  pnpm run xxx
  ```

### å­åŒ…ç®¡ç†æ“ä½œ

åœ¨ workspace æ¨¡å¼ä¸‹ï¼Œpnpm ä¸»è¦é€šè¿‡ --filter é€‰é¡¹è¿‡æ»¤å­æ¨¡å—ï¼Œå®ç°å¯¹å„ä¸ªå·¥ä½œç©ºé—´è¿›è¡Œç²¾ç»†åŒ–æ“ä½œçš„ç›®çš„ã€‚

- ä¸ºæŒ‡å®šæ¨¡å—å®‰è£…å¤–éƒ¨ä¾èµ–
  - ä¸‹é¢çš„ä¾‹å­æŒ‡ä¸º a åŒ…å®‰è£… lodash å¤–éƒ¨ä¾èµ–ã€‚
  - åŒæ ·çš„é“ç†ï¼Œ-S å’Œ -D é€‰é¡¹åˆ†åˆ«å¯ä»¥å°†ä¾èµ–å®‰è£…ä¸ºæ­£å¼ä¾èµ–(dependencies)æˆ–è€…å¼€å‘ä¾èµ–(devDependencies)ã€‚
    ```bash
    # ä¸º a åŒ…å®‰è£… lodash
    pnpm --filter a i -S lodash
    pnpm --filter a i -D lodash
    ```
- æŒ‡å®šå†…éƒ¨æ¨¡å—ä¹‹é—´çš„äº’ç›¸ä¾èµ–
  - æŒ‡å®šæ¨¡å—ä¹‹é—´çš„äº’ç›¸ä¾èµ–ã€‚ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†ä¸º a åŒ…å®‰è£…å†…éƒ¨ä¾èµ– bã€‚
    ```bash
    # æŒ‡å®š a æ¨¡å—ä¾èµ–äº b æ¨¡å—
    pnpm --filter a i -S b
    ```
    pnpm workspace å¯¹å†…éƒ¨ä¾èµ–å…³ç³»çš„è¡¨ç¤ºä¸åŒäºå¤–éƒ¨ï¼Œå®ƒè‡ªå·±çº¦å®šäº†ä¸€å¥— Workspace åè®® (workspace:)ã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªå†…éƒ¨æ¨¡å— a ä¾èµ–åŒæ˜¯å†…éƒ¨æ¨¡å— b çš„ä¾‹å­ã€‚
    ```bash
    {
      "name": "a",
      // ...
      "dependencies": {
        "b": "workspace:^"
      }
    }
    ```
    åœ¨å®é™…å‘å¸ƒ npm åŒ…æ—¶ï¼Œworkspace:^ ä¼šè¢«æ›¿æ¢æˆå†…éƒ¨æ¨¡å— b çš„å¯¹åº”ç‰ˆæœ¬å·(å¯¹åº” package.json ä¸­çš„ version å­—æ®µ)ã€‚æ›¿æ¢è§„å¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š
    ```bash
    {
      "dependencies": {
        "a": "workspace:*", // å›ºå®šç‰ˆæœ¬ä¾èµ–ï¼Œè¢«è½¬æ¢æˆ x.x.x
        "b": "workspace:~", // minor ç‰ˆæœ¬ä¾èµ–ï¼Œå°†è¢«è½¬æ¢æˆ ~x.x.x
        "c": "workspace:^"  // major ç‰ˆæœ¬ä¾èµ–ï¼Œå°†è¢«è½¬æ¢æˆ ^x.x.x
      }
    }
    ```
- è¿‡æ»¤çš„é«˜çº§ç”¨æ³•

  - ç”¨ --filter è¿‡æ»¤å‡ºç›®æ ‡å·¥ä½œç©ºé—´é›†åˆåï¼Œä¸ä»…æ”¯æŒ install å®‰è£…ä¾èµ–ï¼Œrun(æ‰§è¡Œè„šæœ¬)ã€publish(å‘å¸ƒåŒ…) ç­‰ç»å¤§å¤šæ•°åŒ…ç®¡ç†æ“ä½œéƒ½èƒ½å¤Ÿæ‰§è¡Œã€‚
    ```bash
    # å‘å¸ƒæ‰€æœ‰åŒ…åä¸º @a/ å¼€å¤´çš„åŒ…
    pnpm --filter @a/* publish
    ```
  - å½“ --filter ç­›é€‰å‡ºå¤šä¸ªåŒ…æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šé¦–å…ˆåˆ†æå¤šä¸ªåŒ…ä¹‹é—´çš„å†…éƒ¨ä¾èµ–å…³ç³»ï¼ŒæŒ‰ç…§ä¾èµ–å…³ç³»æ‹“æ‰‘æ’åºçš„é¡ºåºå¯¹è¿™äº›åŒ…æ‰§è¡ŒæŒ‡ä»¤ï¼Œå³æŒ‰ä¾èµ–æ ‘ä»å¶åˆ°æ ¹çš„é¡ºåºã€‚ä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¾èµ–å…³ç³»ä¸­ï¼Œæ‰§è¡Œé¡ºåºä¸º C -> D -> B -> Aã€‚

    ![æ‹“æ‰‘æ’åº](./images/build-vue-component-library-from-scratch-01/sort-of-deps.png)

  - --filter çš„è¿˜æœ‰æ›´å¤šè¶…ä¹æˆ‘ä»¬æƒ³è±¡çš„èƒ½åŠ›ï¼Œå®ƒæ”¯æŒä¾èµ–å…³ç³»ç­›é€‰ï¼Œç”šè‡³æ”¯æŒæ ¹æ® git æäº¤è®°å½•è¿›è¡Œç­›é€‰ã€‚

    ```bash
    # ä¸º a ä»¥åŠ a çš„æ‰€æœ‰ä¾èµ–é¡¹æ‰§è¡Œæµ‹è¯•è„šæœ¬
    pnpm --filter a... run test
    # ä¸º b ä»¥åŠä¾èµ– b çš„æ‰€æœ‰åŒ…æ‰§è¡Œæµ‹è¯•è„šæœ¬
    pnpm --filter ...b run test

    # æ‰¾å‡ºè‡ª origin/master æäº¤ä»¥æ¥æ‰€æœ‰å˜æ›´æ¶‰åŠçš„åŒ…
    # ä¸ºè¿™äº›åŒ…ä»¥åŠä¾èµ–å®ƒä»¬çš„æ‰€æœ‰åŒ…æ‰§è¡Œæ„å»ºè„šæœ¬
    # README.md çš„å˜æ›´ä¸ä¼šè§¦å‘æ­¤æœºåˆ¶
    pnpm --filter="...{packages/**}[origin/master]"
      --changed-files-ignore-pattern="**/README.md" run build

    # æ‰¾å‡ºè‡ªä¸Šæ¬¡ commit ä»¥æ¥æ‰€æœ‰å˜æ›´æ¶‰åŠçš„åŒ…
    pnpm --filter "...[HEAD~1]" run build
    ```

æ›´å¤š pnpm ä½¿ç”¨æ–¹é¢çš„ç»†èŠ‚è¿˜éœ€è‡ªè¡ŒæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼š[pnpm å®˜æ–¹æ–‡æ¡£](https://pnpm.io/zh/motivation)ã€‚

## å­æ¨¡å—åˆ’åˆ†

åˆ†æäº†é‚£ä¹ˆå¤šé€‰å‹ç†ç”±ï¼Œç§¯ç´¯äº†é‚£ä¹ˆå¤šå‰ç½®çŸ¥è¯†ï¼Œæ¥ä¸‹æ¥é©¬ä¸Šå°±è¦æŠ•å…¥å®æˆ˜ç¯èŠ‚äº†ã€‚ä½†æ˜¯åœ¨æ­¤ä¹‹å‰ï¼Œè¿˜è¦å…ˆç¡®å®šè‡ªå·±çš„ç»„ä»¶åº“è¦æŒ‰ä»€ä¹ˆæ ·çš„è§„åˆ™åˆ’åˆ†æ¨¡å—ã€‚

æˆ‘ä»¬å°†æŒ‰ç…§ element-plus çš„æ€è·¯å°†ç»„ä»¶åº“æ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œä½†æ›´è¿‘ä¸€æ­¥çš„æ˜¯ï¼Œæˆ‘ä»¬è¦å°è¯•å¯¹ UI ç»„ä»¶çš„ components åŒ…è¿›ä¸€æ­¥æ‹†åˆ†åˆ°å•ä¸ªç»„ä»¶çš„ç²’åº¦ï¼Œå°†æ¯ä¸€ä¸ª UI ç»„ä»¶éƒ½ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—å‘åŒ…ã€‚

ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿè¿™æ¥æºäºä¸€ä¸ªå®é™…çš„éœ€æ±‚ï¼šå¾ˆå¤šé¡¹ç›®ä¸å¸Œæœ›å…¨é‡å¼•å…¥ç»„ä»¶åº“ã€‚è¿™ä¸ªéœ€æ±‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤æ–¹é¢çš„è€ƒè™‘ï¼š

- é¡¹ç›®ä»…ä»…ä½¿ç”¨ç»„ä»¶åº“çš„ä¸ªåˆ«ç»„ä»¶ï¼Œä¸å¸Œæœ›å…¨é‡å¼•å…¥ï¼Œå¢å¤§äº§ç‰©ä½“ç§¯(å…¶å®æŒ‰éœ€å¼•å…¥ã€æ‘‡æ ‘æœºåˆ¶å¯ä»¥è§„é¿)ã€‚
- ç»„ä»¶åº“çš„ç»´æŠ¤è€…å¾€å¾€ä¼šåšæ•´ä½“æ›´æ–°ï¼Œä½†æ˜¯é¡¹ç›®ç»´æŠ¤è€…å´åªå¸Œæœ›æœ€å°é™åº¦å˜æ›´ã€‚ä¾‹å¦‚é¡¹ç›®æ–¹é¢éœ€è¦ Button ç»„ä»¶ä¿®å¤ä¸€ä¸ªé—®é¢˜ï¼Œä»…ä»…å¸Œæœ›å‡çº§è¿™ä¸ª Button ç»„ä»¶ï¼Œè€Œä¸è¦å‡çº§å…¶ä»–æ— å…³ç»„ä»¶ï¼Œä»¥å…å¸¦æ¥æ›´å¤šçš„é£é™©ã€‚

æˆ‘ä»¬ä¸ºè¿™ä¸ªç¤ºä¾‹ç»„ä»¶åº“èµ·åä¸º wonderful-elementã€‚åœ¨æˆ‘ä»¬çš„ç»„ä»¶åº“æ­£å¼æŠ•å…¥å¼€å‘å‰ï¼Œæˆ‘ä»¬å…ˆç¡®å®šä»¥ä¸‹æ¨¡å—åˆ’åˆ†æ€è·¯ã€‚è¿™ä¸ªæ€è·¯å¯èƒ½ä¼šéšç€åç»­éœ€æ±‚çš„å¢åŠ ä¸æ–­åœ°è°ƒæ•´ã€‚

```bash
wonderful-element
â”œâ”€â”€ docs          # ç»„ä»¶åº“æ–‡æ¡£ demo æ¨¡å—
â”œâ”€â”€ packages      # ç»„ä»¶åº“çš„å„ä¸ªå®ç°æ¨¡å—æ”¾åœ¨ packages ç›®å½•ä¸‹
|   â”œâ”€â”€ button    # æŒ‰é’®ç»„ä»¶
|   â”œâ”€â”€ input     # è¾“å…¥æ¡†ç»„ä»¶
|   â”œâ”€â”€ form      # è¡¨å•ç»„ä»¶
|   â”œâ”€â”€ theme     # ç»„ä»¶åº“çš„æ ·å¼ä¸ä¸»é¢˜
|   â”œâ”€â”€ ...       # æ›´å¤š UI ç»„ä»¶
|   â”œâ”€â”€ ui        # å½’çº³å„ä¸ª UI ç»„ä»¶çš„å…¥å£ï¼Œå³ç»„ä»¶åº“çš„ä¸»åŒ…
|   â”œâ”€â”€ shared    # å…¶ä»–å·¥å…·æ–¹æ³•
â”œâ”€â”€ package.json
```

## å®æˆ˜ç¯èŠ‚

### åˆå§‹åŒ–é¡¹ç›®

äº‹ä¸å®œè¿Ÿï¼Œæˆ‘ä»¬å¼€å§‹è¿›å…¥å®æˆ˜ç¯èŠ‚å§ï¼

æˆ‘ä»¬é»˜è®¤å„ä½å·²ç»è£…å¥½äº†å¼€å‘ç¯å¢ƒï¼ŒNode.js ä¸ npm éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œé¦–å…ˆé€šè¿‡ npm i -g pnpm å®‰è£…å¥½ pnpmï¼Œåç»­åŒ…ç®¡ç†ç›¸å…³çš„å‘½ä»¤ä¸€å¾‹ä½¿ç”¨ pnpm æ‰§è¡Œã€‚

æ¥ä¸‹æ¥åˆ›å»ºæˆ‘ä»¬çš„å·¥ç¨‹å§ï¼

```bash
mkdir wonderful-element
cd wonderful-element
pnpm init
```

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ç”Ÿæˆäº† packages.json æ–‡ä»¶ï¼Œä½†æ˜¯æ ¹ç›®å½•å¹¶ä¸æ˜¯ä»»ä½•ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒå°†ä½œä¸ºæ•´ä¸ªç»„ä»¶åº“ monorepo é¡¹ç›®çš„ç®¡ç†ä¸­æ¢ã€‚æˆ‘ä»¬æŠŠå¯¹è¿™ä¸ª package.json ä¸­ name ä»¥å¤–çš„å­—æ®µéƒ½åˆ å»ï¼Œåç»­æˆ‘ä»¬è¦æ ¹æ®è‡ªå·±çš„éœ€è¦è‡ªå®šä¹‰ã€‚

```diff
{
  "name": "wonderful-element",
- "version": "1.0.0",
- "description": "",
- "main": "index.js",
- "scripts": {
-   "test": "echo \"Error: no test specified\" && exit 1"
- },
- "keywords": [],
- "author": "",
- "license": "ISC"
}
```

ä¹‹åï¼Œæˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º pnpm-workspace.yaml æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„å­˜åœ¨æœ¬èº«ä¼šè®© pnpm ä½¿ç”¨ monorepo çš„æ¨¡å¼ç®¡ç†è¿™ä¸ªé¡¹ç›®ï¼Œä»–çš„å†…å®¹å‘Šè¯‰ pnpm å“ªäº›ç›®å½•å°†è¢«åˆ’åˆ†ä¸ºç‹¬ç«‹çš„æ¨¡å—ï¼Œè¿™äº›æ‰€è°“çš„ç‹¬ç«‹æ¨¡å—è¢«åŒ…ç®¡ç†å™¨å«åš workspace å·¥ä½œç©ºé—´ã€‚æˆ‘ä»¬åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™ä¸‹ä»¥ä¸‹å†…å®¹ï¼š

```yaml
packages:
  # æ ¹ç›®å½•ä¸‹çš„ docs æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡æ¡£åº”ç”¨ï¼Œåº”è¯¥è¢«åˆ’åˆ†ä¸ºä¸€ä¸ªæ¨¡å—
  - docs
  # packages ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªç›®å½•éƒ½ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—
  - packages/*
```

é‚£ä¹ˆæˆ‘ä»¬å¼€å§‹å®é™…å»ºç«‹è¿™äº›å·¥ä½œç©ºé—´ï¼Œå¹¶å°†æ ¹ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶å¤åˆ¶åˆ°æ¯ä¸ªå·¥ä½œç©ºé—´ä¸­ã€‚ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæš‚æ—¶åªå»ºç«‹ UI ç»„ä»¶ button(æŒ‰é’®)ã€input(è¾“å…¥æ¡†) ä»¥åŠå…¬å…±æ–¹æ³•æ¨¡å— sharedã€‚è¿™é‡Œå±•ç¤ºå‡ºå®Œæˆæ“ä½œåçš„ç›®å½•æ ‘ï¼š

```bash
ğŸ“¦wonderful-element
 â”£ ğŸ“‚docs
 â”ƒ â”— ğŸ“œpackage.json
 â”£ ğŸ“‚packages
 â”ƒ â”£ ğŸ“‚button
 â”ƒ â”ƒ â”— ğŸ“œpackage.json
 â”ƒ â”£ ğŸ“‚input
 â”ƒ â”ƒ â”— ğŸ“œpackage.json
 â”ƒ â”— ğŸ“‚shared
 â”ƒ   â”— ğŸ“œpackage.json
 â”£ ğŸ“œpackage.json
 â”£ ğŸ“œpnpm-workspace.yaml
 â”— ğŸ“œREADME.md
```

### é…ç½® package.json

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æ˜ç¡®æ¯ä¸€ä¸ªæ¨¡å—çš„å±æ€§ï¼Œè®¾ç½®å®ƒä»¬çš„ package.json æ–‡ä»¶ã€‚

æ³¨æ„ï¼šä¸‹é¢ä¾‹å­ä¸­çš„æ³¨é‡Šåªæ˜¯ä¸ºäº†æ–¹ä¾¿è®²è§£ï¼Œå®æ“è¯·åŠ¡å¿…åˆ é™¤æ³¨é‡Šï¼Œå¸¦æœ‰æ³¨é‡Šçš„ package.json ä¼šåœ¨æ‰§è¡Œå‘½ä»¤æ—¶æŠ¥é”™

#### æ ¹ç›®å½•çš„ package.json

```json
// wonderful-element/package.json
{
  "name": "wonderful-element",
  "private": true,
  "scripts": {
    // å®šä¹‰è„šæœ¬
    "hello": "echo 'hello world'"
  },
  "devDependencies": {
    // å®šä¹‰å„ä¸ªæ¨¡å—çš„å…¬å…±å¼€å‘ä¾èµ–
  }
}
```

- private: true è¡¨ç¤ºè¿™ä¸ªåŒ…æ˜¯ç§æœ‰çš„ï¼Œä¸ä¼šè¢«å‘å¸ƒåˆ°å…¬å…± npm ä»“åº“ã€‚
- devDependencies: æ‰€æœ‰æ¨¡å—éƒ½ä¼šæœ‰ä¸€äº›å…¬å…±çš„å¼€å‘ä¾èµ–ï¼Œä¾‹å¦‚æ„å»ºå·¥å…·ã€TypeScriptã€Vueã€ä»£ç è§„èŒƒç­‰ï¼Œ**å°†å…¬å…±å¼€å‘ä¾èµ–å®‰è£…åœ¨æ ¹ç›®å½•å¯ä»¥å¤§å¹…å‡å°‘å­æ¨¡å—çš„ä¾èµ–å£°æ˜**ã€‚

#### ç»„ä»¶åŒ…çš„ package.json

è¿™é‡Œåªä¸¾ä¸€ä¸ªç»„ä»¶çš„ä¾‹å­ï¼Œå…¶ä»–ç»„ä»¶åŒ…çš„é…ç½®é™¤äº† name ä»¥å¤–å¤§ä½“ç›¸åŒã€‚

```json
// wonderful-element/packages/button/package.json
{
  // æ ‡è¯†ä¿¡æ¯
  "name": "@wonderful-element/button",
  "version": "0.0.0",

  // åŸºæœ¬ä¿¡æ¯
  "description": "",
  "keywords": ["vue", "ui", "component library"],
  "author": "Lucas Liu",
  "license": "MIT",
  "homepage": "https://github.com/gkn1234/wonderful-element/blob/master/README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/gkn1234/wonderful-element.git"
  },
  "bugs": {
    "url": "https://github.com/gkn1234/wonderful-element/issues"
  },

  // å®šä¹‰è„šæœ¬ï¼Œç”±äºè¿˜æ²¡æœ‰é›†æˆå®é™…çš„æ„å»ºæµç¨‹ï¼Œè¿™é‡Œå…ˆä»¥æ‰“å°å‘½ä»¤ä»£æ›¿
  "scripts": {
    "build": "echo build",
    "test": "echo test"
  },

  // å…¥å£ä¿¡æ¯ï¼Œç”±äºæ²¡æœ‰å®é™…äº§ç‰©ï¼Œå…ˆè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²
  "main": "",
  "module": "",
  "types": "",
  "exports": {
    ".": {
      "require": "",
      "module": "",
      "types": ""
    }
  },

  // å‘å¸ƒä¿¡æ¯
  "files": ["dist", "README.md"],
  // "publishConfig": {},

  // ä¾èµ–ä¿¡æ¯
  "peerDependencies": {
    "vue": ">=3.0.0"
  },
  "dependencies": {},
  "devDependencies": {}
}
```

- nameï¼šç»„ä»¶ç»Ÿä¸€å‘å¸ƒåˆ° @wonderful-element åæ ‡ä¸‹ï¼Œæœ‰åæ ‡é™åˆ¶äº†å‘½åç©ºé—´ï¼Œç»„ä»¶çš„åç§°å¯ä»¥å°½å¯èƒ½ç®€å•ã€‚
- filesï¼šæˆ‘ä»¬è§„å®šæ¯ä¸ªåŒ…çš„äº§ç‰©ç›®å½•ä¸º distï¼Œæ­¤å¤–è¿˜è¦ä¸€å¹¶å‘å¸ƒ README.md æ–‡æ¡£ã€‚
- publishConfigï¼šå¦‚æœæˆ‘ä»¬éœ€è¦å‘å¸ƒåˆ°ç§æœ‰ npm ä»“ï¼Œè¯·å–æ¶ˆ publishConfig çš„æ³¨é‡Šå¹¶æ ¹æ®å®é™…æƒ…å†µå¡«å†™ã€‚
- peerDependencies: æ—¢ç„¶æ˜¯ä½¿ç”¨ vue3 çš„ç»„ä»¶åº“ï¼Œæˆ‘ä»¬éœ€è¦æ­£ç¡®å£°æ˜ä¸»æ¡†æ¶çš„ç‰ˆæœ¬ã€‚è¿™é‡Œä¸å°† vue æ”¾å…¥ dependencies æ˜¯å› ä¸ºç”¨æˆ·é¡¹ç›®åŒæ ·ä¹Ÿç›´æ¥ä¾èµ– vue æ¡†æ¶ï¼Œè¿™æ ·å¯èƒ½é€ æˆä¾èµ–ç‰ˆæœ¬ä¸åŒçš„é£é™©ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‘¨è¾¹åº“ã€æ’ä»¶æ€»æ˜¯è¦æŠŠä¸»æ¡†æ¶å£°æ˜ä¸º peerDependencies çš„åŸå› ï¼Œæˆ‘ä»¬çš„ç»„ä»¶åº“ä¹Ÿä¸ä¾‹å¤–ã€‚
- dependenciesï¼šé¡¹ç›®çš„è¿è¡Œä¾èµ–éƒ½å®‰è£…åœ¨è¿™é‡Œã€‚ä¸€èˆ¬ä¸å®¹æ˜“æˆ–æ˜¯ä¸ä»‹æ„å‡ºç°ç‰ˆæœ¬å†²çªçš„ä¾èµ–éƒ½æ”¾åœ¨è¿™é‡Œã€‚æ¯”å¦‚ lodash è¿™æ ·çš„å·¥å…·æ–¹æ³•åº“ï¼Œå³ä½¿ç‰ˆæœ¬å†²çªå‡ºç°å¤šå®ä¾‹çš„ç°è±¡ï¼Œä¹Ÿä¸ä¼šå‡ºç°é—®é¢˜ã€‚
- devDependenciesï¼šå¤§éƒ¨åˆ†å¼€å‘ä¾èµ–éƒ½ä¼šè¢«å®šä¹‰åœ¨æ ¹ç›®å½•ä¸‹ï¼Œè¿™é‡Œåªä¼šå£°æ˜ç‰¹æœ‰çš„ã€æœ¬æ¨¡å—ä¸“å±çš„å¼€å‘ä¾èµ–ã€‚æ¯”å¦‚æŸä¸ªç‰¹å®šçš„ Vite æ’ä»¶ã€‚

#### é¡¹ç›®æ–‡æ¡£çš„ package.json

```json
// wonderful-element/docs/package.json
{
  "name": "@wonderful-element/docs",
  "private": true,
  "scripts": {
    // å®šä¹‰è„šæœ¬ï¼Œç”±äºè¿˜æ²¡æœ‰é›†æˆå®é™…çš„æ„å»ºæµç¨‹ï¼Œè¿™é‡Œå…ˆä»¥æ‰“å°å‘½ä»¤ä»£æ›¿
    "dev": "echo dev",
    "build": "echo build"
  },
  "dependencies": {
    // å®‰è£…æ–‡æ¡£ç‰¹æœ‰ä¾èµ–
  },
  "devDependencies": {
    // å®‰è£…æ–‡æ¡£ç‰¹æœ‰ä¾èµ–
  }
}
```

- private: trueï¼šé¡¹ç›®æ–‡æ¡£çš„ packages.json ä¸æ ¹ç›®å½•ç±»ä¼¼ï¼Œå®ƒåŒæ ·ä¸éœ€è¦è¢«å‘å¸ƒåˆ° npm ä»“åº“ã€‚
- dependencies å’Œ devDependenciesï¼šç”±äºä¸æ¶‰åŠå‘åŒ…ï¼Œå› æ­¤ä¾èµ–å£°æ˜æ— éœ€ä»”ç»†è€ƒé‡ï¼Œå®‰è£…åˆ°é‚£ä¸ªé‡Œé¢æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ã€‚ä¸è¿‡è¿˜æ˜¯å»ºè®®å¤§å®¶è¿˜æ˜¯æŒ‰ç…§â€œå®é™…çš„å«ä¹‰â€æ¥å†³å®šå®‰è£…ç±»å‹ã€‚

## ç»“å°¾ä¸èµ„æ–™æ±‡æ€»

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ monorepo é¡¹ç›®çš„é›å½¢å°±å·²ç»å»ºç«‹å®Œæ¯•ã€‚æœ€åæˆ‘ä»¬ä¸ºé¡¹ç›®è¡¥ä¸Š .gitignoreï¼Œè§„å®š node_modules ä¾èµ–ç›®å½•ä¸å…¥ä»“ï¼Œå‡†å¤‡æäº¤ä»£ç å§ã€‚

```ini
# .gitignore
node_modules
```

æœ¬ç« çš„å®è·µçš„å†…å®¹ä¸å¤šï¼Œæ›´å¤šçš„ç¯‡å¹…è¿˜æ˜¯åœ¨è¯•å›¾åœ¨ç»™å¤§å®¶è®²æ¸…æ¥š pnpmã€monorepo çš„æŠ€æœ¯é€‰å‹ç†ç”±ä¸ä¸€äº›å‰ç½®çŸ¥è¯†ç‚¹ã€‚å»ºè®®ä¸ç†Ÿæ‚‰ pnpm workspace å‘½ä»¤çš„åŒå­¦å¯ä»¥åœ¨æ­å»ºå¥½çš„ç¤ºä¾‹é¡¹ç›®ä¸­å°è¯•ä¸€ä¸‹æ–‡ç« ä¸­æåˆ°çš„ç›¸å…³å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤åœ¨åç»­çš„ç« èŠ‚å°†ä¼šè¢«é¢‘ç¹ä½¿ç”¨ã€‚ä¸‹ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬å°†æ›´å¤šåœ°æŠ•å…¥å®æˆ˜ï¼Œä¸ºæ¯ä¸€ä¸ªåŒ…éƒ½æ¥å…¥ Vite å’Œ TypeScriptï¼ŒæˆåŠŸæ„å»ºå‡ºäº§ç‰©ã€‚

æœ¬ç« æ¶‰åŠåˆ°çš„ç›¸å…³èµ„æ–™æ±‡æ€»å¦‚ä¸‹ï¼š

å®˜ç½‘ä¸æ–‡æ¡£ï¼š

[npm å®˜æ–¹æ–‡æ¡£](https://link.juejin.cn/?target=https%3A%2F%2Fdocs.npmjs.com%2F)

[yarn å®˜æ–¹æ–‡æ¡£](https://link.juejin.cn/?target=https%3A%2F%2Fyarnpkg.com%2F)

[pnpm å®˜æ–¹æ–‡æ¡£](https://link.juejin.cn/?target=https%3A%2F%2Fpnpm.io%2Fzh%2Fmotivation)

[pnpm filter](https://link.juejin.cn/?target=https%3A%2F%2Fpnpm.io%2Fzh%2Ffiltering)

[pnpm workspace](https://link.juejin.cn/?target=https%3A%2F%2Fpnpm.io%2Fzh%2Fworkspaces)

[package.json å®˜æ–¹æ–‡æ¡£](https://link.juejin.cn/?target=https%3A%2F%2Fdocs.npmjs.com%2Fcli%2Fv9%2Fconfiguring-npm%2Fpackage-json%23homepage)

[è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0](https://link.juejin.cn/?target=https%3A%2F%2Fsemver.org%2Flang%2Fzh-CN%2F)

[Webpack Package exports ç« èŠ‚](https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.js.org%2Fguides%2Fpackage-exports%2F%23root)

[lerna monorepo ç®¡ç†å·¥å…·](https://link.juejin.cn/?target=https%3A%2F%2Flerna.js.org%2F)

[Turborepo monorepo ç®¡ç†å·¥å…·](https://link.juejin.cn/?target=https%3A%2F%2Fturbo.build%2Frepo%2Fdocs)

åˆ†äº«åšæ–‡ï¼š

[Monorepo - ä¼˜åŠ£ã€è¸©å‘ã€é€‰å‹](https://juejin.cn/post/7215886869199896637)

[ä¸ºä»€ä¹ˆè¶Šæ¥è¶Šå¤šçš„é¡¹ç›®é€‰æ‹© Monorepoï¼Ÿ](https://juejin.cn/post/7207743145999368229)

[ä½ çœŸçš„äº†è§£package.jsonå—ï¼Ÿ](https://juejin.cn/post/6987179395714646024)

[å…³äºå‰ç«¯å¤§ç®¡å®¶ package.jsonï¼Œä½ çŸ¥é“å¤šå°‘ï¼Ÿ](https://juejin.cn/post/7023539063424548872)

[semverï¼šè¯­ä¹‰ç‰ˆæœ¬å·æ ‡å‡† + npmçš„ç‰ˆæœ¬æ§åˆ¶å™¨ğŸ§²](https://juejin.cn/post/7122240572491825160)

[package.json å¯¼å…¥æ¨¡å—å…¥å£æ–‡ä»¶ä¼˜å…ˆçº§è¯¦è§£](https://juejin.cn/post/7225072417532739644)

[é˜®ä¸€å³° - ES6 Module çš„åŠ è½½å®ç°](https://link.juejin.cn/?target=https%3A%2F%2Fes6.ruanyifeng.com%2F%23docs%2Fmodule-loader)

[ESMå’ŒCJSæ¨¡å—æ‚è°ˆ](https://juejin.cn/post/7048276970768957477)

[å·¥ç¨‹çš„ package.json ä¸­çš„ ^~ è¯¥ä¿ç•™å—ï¼Ÿ](https://juejin.cn/post/7244818841502826553)

[æ–°ä¸€ä»£åŒ…ç®¡ç†å·¥å…· pnpm ä½¿ç”¨å¿ƒå¾—](https://juejin.cn/post/7124613898115743757)

[ä¸€æ–‡å½»åº•çœ‹æ‡‚ package.json ä¸­çš„å„ç§ dependencies](https://juejin.cn/post/7137228673156907044)

[å…³äºç°ä»£åŒ…ç®¡ç†å™¨çš„æ·±åº¦æ€è€ƒâ€”â€”ä¸ºä»€ä¹ˆç°åœ¨æˆ‘æ›´æ¨è pnpm è€Œä¸æ˜¯ npm/yarn?](https://juejin.cn/post/6932046455733485575)
